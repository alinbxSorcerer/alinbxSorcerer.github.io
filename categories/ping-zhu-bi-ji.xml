<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../assets/xml/rss.xsl" media="all"?><rss version="2.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>A Magic Land Declared by David (Posts about 评注笔记)</title><link>https://alinbxsorcerer.github.io/</link><description></description><atom:link href="https://alinbxsorcerer.github.io/categories/ping-zhu-bi-ji.xml" rel="self" type="application/rss+xml"></atom:link><language>en</language><copyright>Contents © 2019 &lt;a href="mailto:davad.fhl.wang@foxmail.com"&gt;David&lt;/a&gt; </copyright><lastBuildDate>Fri, 13 Dec 2019 10:51:42 GMT</lastBuildDate><generator>Nikola (getnikola.com)</generator><docs>http://blogs.law.harvard.edu/tech/rss</docs><item><title>评注Eamcs: 31.The Calendar and the Diary</title><link>https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/</link><dc:creator>David</dc:creator><description>&lt;div&gt;&lt;div class="contents topic" id="contents"&gt;
&lt;p class="topic-title first"&gt;Contents&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id1" id="id8"&gt;总结:&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#movement-in-the-calendar" id="id9"&gt;31.1 Movement in the Calendar&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#motion-by-standard-lengths-of-time" id="id10"&gt;31.1.1 Motion by Standard Lengths of Time&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#beginning-or-end-of-week-month-or-year" id="id11"&gt;31.1.2 Beginning or End of Week, Month or Year&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#specified-dates" id="id12"&gt;31.1.3 Specified Dates&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#scrolling-in-the-calendar" id="id13"&gt;31.2 Scrolling in the Calendar&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#counting-days" id="id14"&gt;31.3 Counting Days&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#miscellaneous-calendar-commands" id="id15"&gt;31.4 Miscellaneous Calendar Commands&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#writing-calendar-files" id="id16"&gt;31.5 Writing Calendar Files&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#holidays" id="id17"&gt;31.6 Holidays&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#times-of-sunrise-and-sunset" id="id18"&gt;31.7 Times of Sunrise and Sunset&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#phases-of-the-moon" id="id19"&gt;31.8 Phases of the Moon&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#conversion-to-and-from-other-calendars" id="id20"&gt;31.9 Conversion To and From Other Calendars&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#supported-calendar-systems" id="id21"&gt;31.9.1 Supported Calendar Systems&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#converting-to-other-calendars" id="id22"&gt;31.9.2 Converting To Other Calendars&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#converting-from-other-calendars" id="id23"&gt;31.9.3 Converting From Other Calendars&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#the-diary" id="id24"&gt;31.10 The Diary&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#the-diary-file" id="id25"&gt;31.10.1 The Diary File&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#displaying-the-diary" id="id26"&gt;31.10.2 Displaying the Diary&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#date-formats" id="id27"&gt;31.10.3 Date Formats&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#commands-to-add-to-the-diary" id="id28"&gt;31.10.4 Commands to Add to the Diary&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#special-diary-entries" id="id29"&gt;31.10.5 Special Diary Entries&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#appointments" id="id30"&gt;31.10.6 Appointments&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#importing-and-exporting-diary-entries" id="id31"&gt;31.10.7 Importing and Exporting Diary Entries&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#daylight-saving-time" id="id32"&gt;31.11 Daylight Saving Time&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#summing-time-intervals" id="id33"&gt;31.12 Summing Time Intervals&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#more-advanced-features-of-the-calendar-and-diary" id="id34"&gt;31.13 More advanced features of the Calendar and Diary&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#customizing-the-calendar" id="id35"&gt;31.13.1 Customizing the Calendar&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#customizing-the-holidays" id="id36"&gt;31.13.2 Customizing the Holidays&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#converting-from-the-mayan-calendar" id="id37"&gt;31.13.3 Converting from the Mayan Calendar&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#date-display-format" id="id38"&gt;31.13.4 Date Display Format&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#time-display-format" id="id39"&gt;31.13.5 Time Display Format&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#customizing-the-diary" id="id40"&gt;31.13.6 Customizing the Diary&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#diary-entries-using-non-gregorian-calendars" id="id41"&gt;31.13.7 Diary Entries Using non-Gregorian Calendars&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#diary-display" id="id42"&gt;31.13.8 Diary Display&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#fancy-diary-display" id="id43"&gt;31.13.9 Fancy Diary Display&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference internal" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#sexp-entries-and-the-fancy-diary-display" id="id44"&gt;31.13.10 Sexp Entries and the Fancy Diary Display&lt;/a&gt;&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id8"&gt;总结:&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;三个部分:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;基本的操作&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;与社会的互动, holidays and calendars&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;与天地四时的互动, sunrise-sunset 因此需要再加上两个时间点, sunrise and sunset&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;img alt="/images/emacs-calendars-structure.jpeg" src="https://alinbxsorcerer.github.io/images/emacs-calendars-structure.jpeg" style="width: 700px;"&gt;
&lt;p&gt;Emacs provides the functions of a desk calendar, with a diary of planned
or past events. It also has facilities for managing your appointments,
and keeping track of how much time you spend working on certain
projects.&lt;/p&gt;
&lt;p&gt;To enter the calendar, type M-x calendar. This displays a three-month
calendar centered on the current month, with point on the current date.
With a numeric argument, as in C-u M-x calendar, it prompts you for the
month and year to be the center of the three-month calendar. The
calendar uses its own buffer, whose major mode is Calendar mode.&lt;/p&gt;
&lt;p&gt;mouse-3 in the calendar brings up a menu of operations on a particular
date; mouse-2 brings up a menu of commonly used calendar features that
are independent of any particular date. To exit the calendar, type q.&lt;/p&gt;
&lt;p&gt;我想要一个类似在桌面操作系统中, 可以操作任务的日历.&lt;/p&gt;
&lt;div class="section" id="movement-in-the-calendar"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id9"&gt;31.1 Movement in the Calendar&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Calendar mode provides commands to move through the calendar
&lt;code class="docutils literal"&gt;in logical units&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;of time such as days, weeks, months, and years. If you move outside the
three months originally displayed, the calendar display scrolls
automatically through time to make the selected date visible. Moving to
a date lets you view its holidays or diary entries, or convert it to
other calendars; moving by long time periods is also useful simply to
scroll the calendar.&lt;/p&gt;
&lt;pre class="code elisp"&gt;&lt;a name="rest_code_07092f5b9649463c99a4145dd8899245-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;;;修改calendar-week-start-day&lt;/span&gt;
&lt;a name="rest_code_07092f5b9649463c99a4145dd8899245-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;setq&lt;/span&gt; &lt;span class="nv"&gt;calendar-week-start-day&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;对movement的总结, span, 按照四个logical unit, day, week, month, year&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;backwords and forwards with specified lenghts&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;selector, begin and end&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;specified dates&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="motion-by-standard-lengths-of-time"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id10"&gt;31.1.1 Motion by Standard Lengths of Time&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The commands for movement in the calendar buffer parallel the commands
for movement in text. You can move forward and backward by days, weeks,
months, and years.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;C-f&lt;/p&gt;
&lt;p&gt;Move point one day forward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-forward-day&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;C-b&lt;/p&gt;
&lt;p&gt;Move point one day backward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-backward-day&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;C-n&lt;/p&gt;
&lt;p&gt;Move point one week forward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-forward-week&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;C-p&lt;/p&gt;
&lt;p&gt;Move point one week backward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-backward-week&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-}
Move point one month forward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-forward-month&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-{&lt;/p&gt;
&lt;p&gt;Move point one month backward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-backward-month&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;in logical unit- C-x ]&lt;/p&gt;
&lt;p&gt;Move point one year forward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-forward-year&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;C-x [&lt;/p&gt;
&lt;p&gt;Move point one year backward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-backward-year&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The day and week commands are natural analogues of the usual Emacs
commands for moving by characters and by lines. Just as C-n usually
moves to the same column in the following line, in Calendar mode it
moves to the same day in the following week. And C-p moves to the same
day in the previous week.&lt;/p&gt;
&lt;p&gt;The arrow keys are equivalent to C-f, C-b, C-n and C-p, just as they
normally are in other modes.&lt;/p&gt;
&lt;p&gt;The commands for motion by months and years work like those for weeks,
but move a larger distance. The month commands M-} and M-{ move forward
or backward by an entire month. The year commands C-x ] and C-x [ move
forward or backward a whole year.&lt;/p&gt;
&lt;p&gt;The easiest way to remember these commands is to consider months and
years analogous to paragraphs and pages of text, respectively. But the
calendar movement commands themselves do not quite parallel those for
movement through text: the ordinary Emacs paragraph commands move to the
beginning or end of a paragraph, whereas these month and year commands
move by an entire month or an entire year, keeping the same date within
the month or year.&lt;/p&gt;
&lt;p&gt;All these commands accept a numeric argument as a repeat count. For
convenience, the digit keys and the minus sign specify numeric arguments
in Calendar mode even without the Meta modifier. For example, 100 C-f
moves point 100 days forward from its present location.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="beginning-or-end-of-week-month-or-year"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id11"&gt;31.1.2 Beginning or End of Week, Month or Year&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;A week (or month, or year) is not just a quantity of days; we think of
weeks (months, years) as starting on particular dates. So Calendar mode
provides commands to move to the start or end of a week, month or year:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;C-a&lt;/p&gt;
&lt;p&gt;Move point to start of week (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-beginning-of-week&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;C-e&lt;/p&gt;
&lt;p&gt;Move point to end of week (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-end-of-week&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-a&lt;/p&gt;
&lt;p&gt;Move point to start of month (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-beginning-of-month&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-e&lt;/p&gt;
&lt;p&gt;Move point to end of month (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-end-of-month&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-&amp;lt;&lt;/p&gt;
&lt;p&gt;Move point to start of year (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-beginning-of-year&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-&amp;gt;&lt;/p&gt;
&lt;p&gt;Move point to end of year (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-end-of-year&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These commands also take numeric arguments as repeat counts, with the
repeat count indicating how many weeks, months, or years to move
backward or forward.&lt;/p&gt;
&lt;p&gt;By default, weeks begin on Sunday. To make them begin on Monday instead,
set the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-week-start-day&lt;/span&gt;&lt;/code&gt; to 1. To change which day
headers are highlighted as weekend days, set the variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-weekend-days&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="specified-dates"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id12"&gt;31.1.3 Specified Dates&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Calendar mode provides commands for moving to a particular date
specified in various ways.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;g d&lt;/p&gt;
&lt;p&gt;Move point to specified date (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g D&lt;/p&gt;
&lt;p&gt;Move point to specified day of year (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-goto-day-of-year&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g w&lt;/p&gt;
&lt;p&gt;Move point to specified week of year (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-iso-goto-week&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;o&lt;/p&gt;
&lt;p&gt;Center calendar around specified month (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-other-month&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;.&lt;/p&gt;
&lt;p&gt;Move point to today's date (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-goto-today&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;g d (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-goto-date&lt;/span&gt;&lt;/code&gt;) prompts for a year, a month, and a day
of the month, and then moves to that date. Because the calendar
includes all dates from the beginning of the current era, you must
type the year in its entirety; that is, type '2010', not '10'.&lt;/p&gt;
&lt;p&gt;g D (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-goto-day-of-year&lt;/span&gt;&lt;/code&gt;) prompts for a year and day
number, and moves to that date. Negative day numbers count backward
from the end of the year. g w (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-iso-goto-week&lt;/span&gt;&lt;/code&gt;) prompts
for a year and week number, and moves to that week.&lt;/p&gt;
&lt;p&gt;o (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-other-month&lt;/span&gt;&lt;/code&gt;) prompts for a month and year, then
centers the three-month calendar around that month.&lt;/p&gt;
&lt;p&gt;You can return to today's date with . (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-goto-today&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="scrolling-in-the-calendar"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id13"&gt;31.2 Scrolling in the Calendar&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The calendar display scrolls automatically through time when you move
out of the visible portion. You can also scroll it manually. Imagine
that the calendar window contains a long strip of paper with the months
on it. Scrolling the calendar means moving the strip horizontally, so
that new months become visible in the window.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&amp;gt;&lt;/p&gt;
&lt;p&gt;Scroll calendar one month forward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-scroll-left&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&amp;lt;&lt;/p&gt;
&lt;p&gt;Scroll calendar one month backward (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-scroll-right&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;C-v Scroll forward by three months
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-scroll-left-three-months&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-v Scroll backward by three months
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-scroll-right-three-months&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The most basic calendar scroll commands scroll by one month at a time.
This means that there are two months of overlap between the display
before the command and the display after. &amp;gt; scrolls the calendar
contents one month forward in time. &amp;lt; scrolls the contents one month
backwards in time.&lt;/p&gt;
&lt;p&gt;The commands C-v and M-v scroll the calendar by an entire
screenful—three months—in analogy with the usual meaning of these
commands. C-v makes later dates visible and M-v makes earlier dates
visible. These commands take a numeric argument as a repeat count; in
particular, since C-u multiplies the next command by four, typing C-u
C-v scrolls the calendar forward by a year and typing C-u M-v scrolls
the calendar backward by a year.&lt;/p&gt;
&lt;p&gt;The function keys (or ) and (or ) are equivalent to C-v and M-v, just as
they are in other modes.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="counting-days"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id14"&gt;31.3 Counting Days&lt;/a&gt;&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;M-=&lt;/p&gt;
&lt;p&gt;Display the number of days in the current region
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-count-days-region&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;To determine the number of days in a range, set the mark on one date
using C-, move point to another date, and type M-=
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-count-days-region&lt;/span&gt;&lt;/code&gt;). The numbers of days shown is
&lt;em&gt;inclusive&lt;/em&gt;; that is, it includes the days specified by mark and
point.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;div class="section" id="miscellaneous-calendar-commands"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id15"&gt;31.4 Miscellaneous Calendar Commands&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Display day-in-year (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-print-day-of-year&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;C-c C-l&lt;/p&gt;
&lt;p&gt;Regenerate the calendar window (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-redraw&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&amp;lt;SPC&amp;gt;&lt;/p&gt;
&lt;p&gt;Scroll the next window up (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;scroll-other-window&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&amp;lt;DEL&amp;gt;&lt;/p&gt;
&lt;p&gt;Scroll the next window down (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;scroll-other-window-down&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;q&lt;/p&gt;
&lt;p&gt;Exit from calendar (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-exit&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;#&lt;/p&gt;
&lt;p&gt;To display the number of days elapsed since the start of the year, or
the number of days remaining in the year, type the p d command
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-print-day-of-year&lt;/span&gt;&lt;/code&gt;). This displays both of those numbers in
the echo area. The count of days elapsed includes the selected date. The
count of days remaining does not include that date.&lt;/p&gt;
&lt;p&gt;If the calendar window text gets corrupted, type C-c C-l
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-redraw&lt;/span&gt;&lt;/code&gt;) to redraw it. (This can only happen if you use
non-Calendar-mode editing commands.)&lt;/p&gt;
&lt;p&gt;In Calendar mode, you can use (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;scroll-other-window&lt;/span&gt;&lt;/code&gt;) and
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;scroll-other-window-down&lt;/span&gt;&lt;/code&gt;) to scroll the other window (if there is
one) up or down, respectively. This is handy when you display a list of
holidays or diary entries in another window.&lt;/p&gt;
&lt;p&gt;To exit from the calendar, type q (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-exit&lt;/span&gt;&lt;/code&gt;). This buries all
buffers related to the calendar, selecting other buffers. (If a frame
contains a dedicated calendar window, exiting from the calendar deletes
or iconifies that frame depending on the value of
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-remove-frame-by-deleting&lt;/span&gt;&lt;/code&gt;.)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="writing-calendar-files"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id16"&gt;31.5 Writing Calendar Files&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;You can write calendars and diary entries to HTML and LaTeX files.&lt;/p&gt;
&lt;p&gt;The Calendar HTML commands produce files of HTML code that contain
calendar, holiday, and diary entries. Each file applies to one month,
and has a name of the format yyyy-mm.html, where yyyy and mm are the
four-digit year and two-digit month, respectively. The variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-html-directory&lt;/span&gt;&lt;/code&gt; specifies the default output directory for the
HTML files. To prevent holidays from being shown, customize
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-html-holidays&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Diary entries enclosed by &lt;code class="docutils literal"&gt;&amp;lt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;&amp;gt;&lt;/code&gt; are interpreted as HTML tags
(for example: this is a diary entry with some red text). You can change
the overall appearance of the displayed HTML pages (for example, the
color of various page elements, header styles) via a stylesheet cal.css
in the directory containing the HTML files (see the value of the
variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-html-css-default&lt;/span&gt;&lt;/code&gt; for relevant style settings).&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;H m&lt;/p&gt;
&lt;p&gt;Generate a one-month calendar (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-html-cursor-month&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;H y&lt;/p&gt;
&lt;p&gt;Generate a calendar file for each month of a year, as well as an
index page (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-html-cursor-year&lt;/span&gt;&lt;/code&gt;). By default, this command
writes files to a yyyy subdirectory—if this is altered some
hyperlinks between years will not work.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-html-print-day-number-flag&lt;/span&gt;&lt;/code&gt; is non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt;,
then the monthly calendars show the day-of-the-year number. The variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-html-year-index-cols&lt;/span&gt;&lt;/code&gt; specifies the number of columns in the
yearly index page.&lt;/p&gt;
&lt;p&gt;The Calendar LaTeX commands produce a buffer of LaTeX code that prints
as a calendar. Depending on the command you use, the printed calendar
covers the day, week, month or year that point is in.&lt;/p&gt;
&lt;p&gt;​&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;t m&lt;/p&gt;
&lt;p&gt;Generate a one-month calendar (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-month&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t M&lt;/p&gt;
&lt;p&gt;Generate a sideways-printing one-month calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-month-landscape&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t d&lt;/p&gt;
&lt;p&gt;Generate a one-day calendar (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-day&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t w 1&lt;/p&gt;
&lt;p&gt;Generate a one-page calendar for one week, with hours
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-week&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t w 2&lt;/p&gt;
&lt;p&gt;Generate a two-page calendar for one week, with hours
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-week2&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t w 3&lt;/p&gt;
&lt;p&gt;Generate an ISO-style calendar for one week, without hours
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-week-iso&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t w 4&lt;/p&gt;
&lt;p&gt;Generate a calendar for one Monday-starting week, with hours
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-week-monday&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t w W&lt;/p&gt;
&lt;p&gt;Generate a two-page calendar for one week, without hours
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-week2-summary&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t f w&lt;/p&gt;
&lt;p&gt;Generate a Filofax-style two-weeks-at-a-glance calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-filofax-2week&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t f W&lt;/p&gt;
&lt;p&gt;Generate a Filofax-style one-week-at-a-glance calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-filofax-week&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t y&lt;/p&gt;
&lt;p&gt;Generate a calendar for one year (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-year&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t Y&lt;/p&gt;
&lt;p&gt;Generate a sideways-printing calendar for one year
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-year-landscape&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;t f y&lt;/p&gt;
&lt;p&gt;Generate a Filofax-style calendar for one year
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-cursor-filofax-year&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Some of these commands print the calendar sideways (in landscape mode),
so it can be wider than it is long. Some of them use Filofax paper size
(3.75in x 6.75in). All of these commands accept a prefix argument, which
specifies how many days, weeks, months or years to print (starting
always with the selected one).&lt;/p&gt;
&lt;p&gt;If the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-holidays&lt;/span&gt;&lt;/code&gt; is non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt; (the default),
then the printed calendars show the holidays in &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-holidays&lt;/span&gt;&lt;/code&gt;.
If the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-diary&lt;/span&gt;&lt;/code&gt; is non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt; (the default is
&lt;code class="docutils literal"&gt;nil&lt;/code&gt;), diary entries are included also (in monthly, Filofax, and
iso-week calendars only). If the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-rules&lt;/span&gt;&lt;/code&gt; is
non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt; (the default is &lt;code class="docutils literal"&gt;nil&lt;/code&gt;), the calendar displays ruled
pages in styles that have sufficient room. Consult the documentation of
the individual cal-tex functions to see which calendars support which
features.&lt;/p&gt;
&lt;p&gt;You can use the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;cal-tex-preamble-extra&lt;/span&gt;&lt;/code&gt; to insert extra
LaTeX commands in the preamble of the generated document if you need to.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="holidays"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id17"&gt;31.6 Holidays&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The Emacs calendar knows about many major and minor holidays, and can
display them. You can add your own holidays to the default list.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;mouse-3 Holidays&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;h&lt;/p&gt;
&lt;p&gt;Display holidays for the selected date
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-cursor-holidays&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;x&lt;/p&gt;
&lt;p&gt;Mark holidays in the calendar window (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mark-holidays&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;u&lt;/p&gt;
&lt;p&gt;Unmark calendar window (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-unmark&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;a&lt;/p&gt;
&lt;p&gt;List all holidays for the displayed three months in another window
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-list-holidays&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-x holidays&lt;/p&gt;
&lt;p&gt;List all holidays for three months around today's date in another
window.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!--  --&gt;
&lt;blockquote&gt;
&lt;p&gt;Define: Veterans' day 老兵 Etymology: Old Lithuanian vetušas "old,
aged;" and compare wether). 助记: Veterans day&lt;/p&gt;
&lt;/blockquote&gt;
&lt;pre class="code elisp"&gt;&lt;a name="rest_code_544c0528e1244185b5e8dc97ec40f05b-1"&gt;&lt;/a&gt;&lt;span class="c1"&gt;;;(sunrise-sunset)&lt;/span&gt;
&lt;a name="rest_code_544c0528e1244185b5e8dc97ec40f05b-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;lunar-phases&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;M-x list-holidays&lt;/p&gt;
&lt;p&gt;List holidays in another window for a specified range of years.&lt;/p&gt;
&lt;p&gt;To see if any holidays fall on a given date, position point on that
date in the calendar window and use the h command. Alternatively,
click on that date with mouse-3 and then choose Holidays from the
menu that appears. Either way, this displays the holidays for that
date, in the echo area if they fit there, otherwise in a separate
window.&lt;/p&gt;
&lt;p&gt;To view the distribution of holidays for all the dates shown in the
calendar, use the x command. This displays the dates that are
holidays in a different face. See
&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Calendar-Customizing"&gt;calendar-holiday-marker&lt;/a&gt;.
The command applies both to the currently visible months and to other
months that subsequently become visible by scrolling. To turn marking
off and erase the current marks, type u, which also erases any diary
marks (see
&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Diary"&gt;Diary&lt;/a&gt;).
If the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mark-holidays-flag&lt;/span&gt;&lt;/code&gt; is non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt;,
creating or updating the calendar marks holidays automatically.&lt;/p&gt;
&lt;p&gt;To get even more detailed information, use the a command, which
displays a separate buffer containing a list of all holidays in the
current three-month range. You can use and in the calendar window to
scroll that list up and down, respectively.&lt;/p&gt;
&lt;p&gt;The command M-x holidays displays the list of holidays for the
current month and the preceding and succeeding months; this works
even if you don't have a calendar window. If the variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-view-holidays-initially-flag&lt;/span&gt;&lt;/code&gt; is non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt;, creating
the calendar displays holidays in this way. If you want the list of
holidays centered around a different month, use C-u M-x holidays,
which prompts for the month and year.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The holidays known to Emacs include United States holidays and the major
Bahá'í, Chinese, Christian, Islamic, and Jewish holidays; also the
solstices and equinoxes.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Define: solstices &lt;em&gt;ˈsɑːl.stɪs&lt;/em&gt; 至日, 至点 Etymology: Middle English:
from Old French, from Latin solstitium, from sol ‘sun’ + stit-
‘stopped, stationary’ (from the verb sistere). 助记:sol(sun) stice,
stand, 停止的点.&lt;/p&gt;
&lt;p&gt;Define: equinox &lt;em&gt;ˈek.wə.nɑːks&lt;/em&gt; Etymology: late Middle English: from
Old French equinoxe or Latin aequinoctium, from aequi- ‘equal’ + nox,
noct- ‘night’. 助记: equal好说,nox是night&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The command M-x holiday-list displays the list of holidays for a range
of years. This function asks you for the starting and stopping years,
and allows you to choose all the holidays or one of several categories
of holidays. You can use this command even if you don't have a calendar
window.&lt;/p&gt;
&lt;p&gt;The dates used by Emacs for holidays are based on &lt;em&gt;current practice&lt;/em&gt;,
not historical fact. For example Veteran's Day began in 1919, but is
shown in earlier years.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="times-of-sunrise-and-sunset"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id18"&gt;31.7 Times of Sunrise and Sunset&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Special calendar commands can tell you, to within a minute or two, the
times of sunrise and sunset for any date.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;mouse-3 Sunrise/sunset&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;S&lt;/p&gt;
&lt;p&gt;Display times of sunrise and sunset for the selected date
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-sunrise-sunset&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-x sunrise-sunset&lt;/p&gt;
&lt;p&gt;Display times of sunrise and sunset for today's date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;C-u M-x sunrise-sunset&lt;/p&gt;
&lt;p&gt;Display times of sunrise and sunset for a specified date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-x calendar-sunrise-sunset-month&lt;/p&gt;
&lt;p&gt;Display times of sunrise and sunset for the selected month.&lt;/p&gt;
&lt;p&gt;Within the calendar, to display the &lt;em&gt;local times&lt;/em&gt; of sunrise and
sunset in the echo area, move point to the date you want, and type S.
Alternatively, click mouse-3 on the date, then choose
'Sunrise/sunset' from the menu that appears. The command M-x
sunrise-sunset is available outside the calendar to display this
information for today's date or a specified date. To specify a date
other than today, use C-u M-x sunrise-sunset, which prompts for the
year, month, and day.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can display the times of sunrise and sunset for any location and any
date with C-u C-u M-x sunrise-sunset. This asks you for a longitude,
latitude, number of minutes difference from Coordinated Universal Time,
and date, and then tells you the times of sunrise and sunset for that
location on that date.&lt;/p&gt;
&lt;p&gt;Because the times of sunrise and sunset depend on the location on earth,
you need to tell Emacs your latitude, longitude, and location name
before using these commands. Here is an example of what to set:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(setq calendar-latitude 40.1)
(setq calendar-longitude -88.2)
(setq calendar-location-name "Urbana, IL")&lt;/pre&gt;
&lt;p&gt;Use one decimal place in the values of &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-latitude&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-longitude&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Your time zone also affects the local time of sunrise and sunset. Emacs
usually gets time zone information from the operating system, but if
these values are not what you want (or if the operating system does not
supply them), you must set them yourself. Here is an example:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(setq calendar-time-zone -360)
(setq calendar-standard-time-zone-name "CST")
(setq calendar-daylight-time-zone-name "CDT")&lt;/pre&gt;
&lt;p&gt;The value of &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-time-zone&lt;/span&gt;&lt;/code&gt; is the number of minutes difference
between your local standard time and Coordinated Universal Time
(Greenwich time). The values of &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-standard-time-zone-name&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-daylight-time-zone-name&lt;/span&gt;&lt;/code&gt; are the abbreviations used in your
time zone. Emacs displays the times of sunrise and sunset &lt;em&gt;corrected for
daylight saving time&lt;/em&gt;. See&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Daylight-Saving"&gt;Daylight
Saving&lt;/a&gt;,
for how daylight saving time is determined.&lt;/p&gt;
&lt;p&gt;As a user, you might find it convenient to set the calendar location
variables for your usual physical location in your .emacs file. If you
are a system administrator, you may want to set these variables for all
users in a default.el file. See &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Init-File"&gt;Init
File&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="phases-of-the-moon"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id19"&gt;31.8 Phases of the Moon&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;These calendar commands display the dates and times of the phases of the
moon (new moon, first quarter, full moon, last quarter). This feature is
useful for debugging problems that depend on the phase of the moon.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;M Display the dates and times for all the quarters of the moon for
the three-month period shown (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-lunar-phases&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-x lunar-phases&lt;/p&gt;
&lt;p&gt;Display dates and times of the quarters of the moon for three months
around today's date.&lt;/p&gt;
&lt;p&gt;Within the calendar, use the M command to display a separate buffer
of the phases of the moon for the current three-month range. The
dates and times listed are accurate to within a few minutes.&lt;/p&gt;
&lt;p&gt;Outside the calendar, use the command M-x lunar-phases to display the
list of the phases of the moon for the current month and the
preceding and succeeding months. For information about a different
month, use C-u M-x lunar-phases, which prompts for the month and
year.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The dates and times given for the phases of the moon are given in local
time (corrected for daylight saving, when appropriate). See the
discussion in the previous section. See
&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Sunrise_002fSunset"&gt;Sunrise/Sunset&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="conversion-to-and-from-other-calendars"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id20"&gt;31.9 Conversion To and From Other Calendars&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The Emacs calendar displayed is &lt;em&gt;always&lt;/em&gt; the Gregorian calendar,
sometimes called the New Style calendar, which is used in most of the
world today. However, this calendar did not exist before the sixteenth
century and was not widely used before the eighteenth century; it did
not fully displace the Julian calendar and gain universal acceptance
until the early twentieth century. The Emacs calendar can display any
month since January, year 1 of the current era, but the calendar
displayed is always the Gregorian, even for a date at which the
Gregorian calendar did not exist.&lt;/p&gt;
&lt;p&gt;While Emacs cannot display other calendars, it can convert dates to and
from several other calendars.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Calendar-Systems"&gt;Calendar
Systems&lt;/a&gt;:
The calendars Emacs understands (aside from Gregorian).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#To-Other-Calendar"&gt;To Other
Calendar&lt;/a&gt;:
Converting the selected date to various calendars.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#From-Other-Calendar"&gt;From Other
Calendar&lt;/a&gt;:
Moving to a date specified in another calendar.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="supported-calendar-systems"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id21"&gt;31.9.1 Supported Calendar Systems&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The ISO commercial calendar is often used in business.&lt;/p&gt;
&lt;p&gt;The Julian calendar, named after Julius Caesar, was the one used in
Europe throughout medieval times, and in many countries up until the
nineteenth century.&lt;/p&gt;
&lt;p&gt;Astronomers use a simple counting of days elapsed since noon, Monday,
January 1, 4713 B.C. on the Julian calendar. The number of days elapsed
is called the Julian day number or the Astronomical day number.&lt;/p&gt;
&lt;p&gt;The Hebrew calendar is used by tradition in the Jewish religion. The
Emacs calendar program uses the Hebrew calendar to determine the dates
of Jewish holidays. Hebrew calendar dates begin and end at sunset.&lt;/p&gt;
&lt;p&gt;The Islamic calendar is used in many predominantly Islamic countries.
Emacs uses it to determine the dates of Islamic holidays. There is no
universal agreement in the Islamic world about the calendar; Emacs uses
a widely accepted version, but the precise dates of Islamic holidays
often depend on proclamation by religious authorities, not on
calculations. As a consequence, the actual dates of observance can vary
slightly from the dates computed by Emacs. Islamic calendar dates begin
and end at sunset.&lt;/p&gt;
&lt;p&gt;The French Revolutionary calendar was created by the Jacobins after the
1789 revolution, to represent a more secular and nature-based view of
the annual cycle, and to install a 10-day week in a rationalization
measure similar to the metric system. The French government officially
abandoned this calendar at the end of 1805.&lt;/p&gt;
&lt;p&gt;The Maya of Central America used three separate, overlapping calendar
systems, the &lt;em&gt;long count&lt;/em&gt;, the &lt;em&gt;tzolkin&lt;/em&gt;, and the &lt;em&gt;haab&lt;/em&gt;. Emacs knows
about all three of these calendars. Experts dispute the exact
correlation between the Mayan calendar and our calendar; Emacs uses the
Goodman-Martinez-Thompson correlation in its calculations.&lt;/p&gt;
&lt;p&gt;The Copts use a calendar based on the ancient Egyptian solar calendar.
Their calendar consists of twelve 30-day months followed by an extra
five-day period. Once every fourth year they add a leap day to this
extra period to make it six days. The Ethiopic calendar is identical in
structure, but has different year numbers and month names.&lt;/p&gt;
&lt;p&gt;The Persians use a solar calendar based on a design of Omar Khayyam.
Their calendar consists of twelve months of which the first six have 31
days, the next five have 30 days, and the last has 29 in ordinary years
and 30 in leap years. Leap years occur in a complicated pattern every
four or five years. The calendar implemented here is the arithmetical
Persian calendar championed by Birashk, based on a 2,820-year cycle. It
differs from the astronomical Persian calendar, which is based on
astronomical events. As of this writing the first future discrepancy is
projected to occur on March 20, 2025. It is currently not clear what the
official calendar of Iran will be at that time.&lt;/p&gt;
&lt;p&gt;The Chinese calendar is a complicated system of lunar months arranged
into solar years. The years go in cycles of sixty, each year containing
either twelve months in an ordinary year or thirteen months in a leap
year; each month has either 29 or 30 days. Years, ordinary months, and
days are named by combining one of ten celestial stems with one of
twelve terrestrial branches for a total of sixty names that are repeated
in a cycle of sixty.&lt;/p&gt;
&lt;p&gt;The Bahá'í calendar system is based on a solar cycle of 19 months with
19 days each. The four remaining intercalary days are placed between the
18th and 19th months.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="converting-to-other-calendars"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id22"&gt;31.9.2 Converting To Other Calendars&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The following commands describe the selected date (the date at point) in
various other calendar systems:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;mouse-3 Other calendars&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p o&lt;/p&gt;
&lt;p&gt;Display the selected date in various other calendars.
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-print-other-dates&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p c&lt;/p&gt;
&lt;p&gt;Display ISO commercial calendar equivalent for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-iso-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p j&lt;/p&gt;
&lt;p&gt;Display Julian date for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-julian-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p a&lt;/p&gt;
&lt;p&gt;Display astronomical (Julian) day number for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-astro-print-day-number&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p h&lt;/p&gt;
&lt;p&gt;Display Hebrew date for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-hebrew-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p i&lt;/p&gt;
&lt;p&gt;Display Islamic date for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-islamic-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p f&lt;/p&gt;
&lt;p&gt;Display French Revolutionary date for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-french-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p b&lt;/p&gt;
&lt;p&gt;Display Bahá'í date for selected day (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-bahai-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p C&lt;/p&gt;
&lt;p&gt;Display Chinese date for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-chinese-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p k&lt;/p&gt;
&lt;p&gt;Display Coptic date for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-coptic-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p e&lt;/p&gt;
&lt;p&gt;Display Ethiopic date for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-ethiopic-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p p&lt;/p&gt;
&lt;p&gt;Display Persian date for selected day
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-persian-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;p m&lt;/p&gt;
&lt;p&gt;Display Mayan date for selected day (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mayan-print-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Otherwise, move point to the date you want to convert, then type the
appropriate command starting with p from the table above. The prefix p
is a mnemonic for "print", since Emacs "prints" the equivalent date in
the echo area. p o displays the date in all forms known to Emacs. You
can also use mouse-3 and then choose Other calendars from the menu that
appears. This displays the equivalent forms of the date in all the
calendars Emacs understands, in the form of a menu. (Choosing an
alternative from this menu doesn't actually do anything—the menu is used
only for display.)&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="converting-from-other-calendars"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id23"&gt;31.9.3 Converting From Other Calendars&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;You can use the other supported calendars to specify a date to move to.
This section describes the commands for doing this using calendars other
than Mayan; for the Mayan calendar, see the following section.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;g c&lt;/p&gt;
&lt;p&gt;Move to a date specified in the ISO commercial calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-iso-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g w&lt;/p&gt;
&lt;p&gt;Move to a week specified in the ISO commercial calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-iso-goto-week&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g j&lt;/p&gt;
&lt;p&gt;Move to a date specified in the Julian calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-julian-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g a&lt;/p&gt;
&lt;p&gt;Move to a date specified with an astronomical (Julian) day number
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-astro-goto-day-number&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g b&lt;/p&gt;
&lt;p&gt;Move to a date specified in the Bahá'í calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-bahai-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g h&lt;/p&gt;
&lt;p&gt;Move to a date specified in the Hebrew calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-hebrew-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g i&lt;/p&gt;
&lt;p&gt;Move to a date specified in the Islamic calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-islamic-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g f&lt;/p&gt;
&lt;p&gt;Move to a date specified in the French Revolutionary calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-french-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g C&lt;/p&gt;
&lt;p&gt;Move to a date specified in the Chinese calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-chinese-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g p&lt;/p&gt;
&lt;p&gt;Move to a date specified in the Persian calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-persian-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g k&lt;/p&gt;
&lt;p&gt;Move to a date specified in the Coptic calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-coptic-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g e&lt;/p&gt;
&lt;p&gt;Move to a date specified in the Ethiopic calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-ethiopic-goto-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These commands ask you for a date on the other calendar, move point to
the Gregorian calendar date equivalent to that date, and display the
other calendar's date in the echo area. Emacs uses strict completion
(see &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Completion-Exit"&gt;Completion
Exit&lt;/a&gt;)
whenever it asks you to type a month name, so you don't have to worry
about the spelling of Hebrew, Islamic, or French names.&lt;/p&gt;
&lt;p&gt;One common issue concerning the Hebrew calendar is the computation of
the anniversary of a date of death, called a yahrzeit. The Emacs
calendar includes a facility for such calculations. If you are in the
calendar, the command M-x calendar-hebrew-list-yahrzeits asks you for a
range of years and then displays a list of the yahrzeit dates for those
years for the date given by point. If you are not in the calendar, this
command first asks you for the date of death and the range of years, and
then displays the list of yahrzeit dates.&lt;/p&gt;
&lt;div class="section" id="the-diary"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id24"&gt;31.10 The Diary&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The Emacs diary keeps track of appointments or other events on a daily
basis, in &lt;code class="docutils literal"&gt;conjunction&lt;/code&gt; with the calendar. To use the diary feature,
you must first create a diary file containing a list of events and their
dates. Then Emacs can automatically pick out and display the events for
today, for the immediate future, or for any specified date.&lt;/p&gt;
&lt;p&gt;Although you probably will start by creating a diary manually, Emacs
provides a number of commands to let you view, add, and change diary
entries.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="the-diary-file"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id25"&gt;31.10.1 The Diary File&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Your diary file is a file that records events associated with particular
dates. The name of the diary file is specified by the variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-file&lt;/span&gt;&lt;/code&gt;. The default is &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;~/.emacs.d/diary&lt;/span&gt;&lt;/code&gt;, though for
compatibility with older versions Emacs will use ~/diary if it exists.&lt;/p&gt;
&lt;p&gt;Each entry in the diary file describes one event and consists of one or
more lines. An entry always begins with a date specification at the left
margin. The rest of the entry is simply text to describe the event. If
the entry has more than one line, then the lines after the first must
begin with whitespace to indicate they continue a previous entry. Lines
that do not begin with valid dates and do not continue a preceding entry
are ignored. Here's an example:&lt;/p&gt;
&lt;pre class="literal-block"&gt;12/22/2015  Twentieth wedding anniversary!
10/22       Ruth's birthday.
* 21, *:    Payday
Tuesday--weekly meeting with grad students at 10am
         Supowit, Shen, Bitner, and Kapoor to attend.
1/13/89     Friday the thirteenth!!
thu 4pm     squash game with Lloyd.
mar 16      Dad's birthday
April 15, 2016 Income tax due.
* 15        time cards due.&lt;/pre&gt;
&lt;p&gt;This example uses extra spaces to align the event descriptions of most
of the entries. Such formatting is purely a matter of taste.&lt;/p&gt;
&lt;p&gt;You can also use a format where the first line of a diary entry consists
only of the date or day name (with no following blanks or punctuation).
For example:&lt;/p&gt;
&lt;pre class="literal-block"&gt;02/11/2012
      Bill B. visits Princeton today
      2pm Cognitive Studies Committee meeting
      2:30-5:30 Liz at Lawrenceville
      4:00pm Dentist appt
      7:30pm Dinner at George's
      8:00-10:00pm concert&lt;/pre&gt;
&lt;p&gt;This entry will have a different appearance if you use the simple diary
display (see`Diary
Display &amp;lt;&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Diary-Display"&gt;https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Diary-Display&lt;/a&gt;&amp;gt;`__).
The simple diary display omits the date line at the beginning; only the
continuation lines appear. This style of entry looks neater when you
display just a single day's entries, but can cause confusion if you ask
for more than one day's entries.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="displaying-the-diary"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id26"&gt;31.10.2 Displaying the Diary&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Once you have created a diary file, you can use the calendar to view it.
You can also view today's events outside of Calendar mode. In the
following, key bindings refer to the Calendar buffer.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;mouse-3 Diary&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;d&lt;/p&gt;
&lt;p&gt;Display all diary entries for the selected date
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-view-entries&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;s&lt;/p&gt;
&lt;p&gt;Display the entire diary file (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-show-all-entries&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;m&lt;/p&gt;
&lt;p&gt;Mark all visible dates that have diary entries
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-mark-entries&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;u&lt;/p&gt;
&lt;p&gt;Unmark the calendar window (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-unmark&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-x diary-print-entries&lt;/p&gt;
&lt;p&gt;Print hard copy of the diary display as it appears.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-x diary&lt;/p&gt;
&lt;p&gt;Display all diary entries for today's date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;M-x diary-mail-entries&lt;/p&gt;
&lt;p&gt;Mail yourself email reminders about upcoming diary entries.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Displaying the diary entries with d shows in a separate buffer the diary
entries for the selected date in the calendar. The mode line of the new
buffer shows the date of the diary entries. Holidays are shown either in
the buffer or in the mode line, depending on the display method you
choose (see &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Diary-Display"&gt;Diary
Display&lt;/a&gt;).
If you specify a numeric argument with d, it shows all the diary entries
for that many successive days. Thus, 2 d displays all the entries for
the selected date and for the following day.&lt;/p&gt;
&lt;p&gt;Another way to display the diary entries for a date is to click mouse-3
on the date, and then choose Diary entries from the menu that appears.
If the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-view-diary-initially-flag&lt;/span&gt;&lt;/code&gt; is non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt;,
creating the calendar lists the diary entries for the current date
(provided the current date is visible).&lt;/p&gt;
&lt;p&gt;To get a broader view of which days are mentioned in the diary, use the
m command. This marks the dates that have diary entries in a different
face. See
&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Calendar-Customizing"&gt;diary-entry-marker&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This command applies both to the months that are currently visible and
to those that subsequently become visible after scrolling. To turn
marking off and erase the current marks, type u, which also turns off
holiday marks (see
&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Holidays"&gt;Holidays&lt;/a&gt;).
If the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mark-diary-entries-flag&lt;/span&gt;&lt;/code&gt; is non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt;,
creating or updating the calendar marks diary dates automatically.&lt;/p&gt;
&lt;p&gt;To prevent an individual diary entry from being marked in the calendar,
insert the string that &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-nonmarking-symbol&lt;/span&gt;&lt;/code&gt; specifies (the
default is '&amp;amp;') at the beginning of the entry, before the date. This has
no effect on display of the entry in the diary buffer; it only affects
marks on dates in the calendar. Nonmarking entries can be useful for
generic entries that would otherwise mark many different dates.&lt;/p&gt;
&lt;p&gt;To see the full diary file, rather than just some of the entries, use
the s command.&lt;/p&gt;
&lt;p&gt;The command M-x diary displays the diary entries for the current date,
independently of the calendar display, and optionally for the next few
days as well; the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-number-of-entries&lt;/span&gt;&lt;/code&gt; specifies how
many days to include. See
&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Diary-Customizing"&gt;diary-number-of-entries&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If you put &lt;code class="docutils literal"&gt;(diary)&lt;/code&gt; in your .emacs file, this automatically displays
a window with the day's diary entries when you start Emacs.&lt;/p&gt;
&lt;p&gt;Some people like to receive email notifications of events in their
diary. To send such mail to yourself, use the command M-x
diary-mail-entries. A prefix argument specifies how many days (starting
with today) to check; otherwise, the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-mail-days&lt;/span&gt;&lt;/code&gt; says
how many days.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="date-formats"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id27"&gt;31.10.3 Date Formats&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Here are some sample diary entries, illustrating different ways of
formatting a date. The examples all show dates in American order (month,
day, year), but Calendar mode supports European order (day, month, year)
and ISO order (year, month, day) as options.&lt;/p&gt;
&lt;pre class="literal-block"&gt;4/20/12  Switch-over to new tabulation system
apr. 25  Start tabulating annual results
4/30  Results for April are due
*/25  Monthly cycle finishes
Friday  Don't leave without backing up files&lt;/pre&gt;
&lt;p&gt;The first entry appears only once, on April 20, 2012. The second and
third appear every year on the specified dates, and the fourth uses a
wildcard (asterisk) for the month, so it appears on the 25th of every
month. The final entry appears every week on Friday.&lt;/p&gt;
&lt;p&gt;You can use just numbers to express a date, as in 'month/day' or
'month/day/year'. This must be followed by a nondigit. In the date
itself, month and day are numbers of one or two digits. The optional
year is also a number, and may be abbreviated to the last two digits;
that is, you can use '11/12/2012' or '11/12/12'.&lt;/p&gt;
&lt;p&gt;Dates can also have the form 'monthname day' or 'monthname day, year',
where the month's name can be spelled in full or abbreviated (with or
without a period). The preferred abbreviations for month and day names
can be set using the variables &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-abbrev-length&lt;/span&gt;&lt;/code&gt;,
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-month-abbrev-array&lt;/span&gt;&lt;/code&gt;, and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-day-abbrev-array&lt;/span&gt;&lt;/code&gt;. The
default is to use the first three letters of a name as its abbreviation.
Case is not significant.&lt;/p&gt;
&lt;p&gt;A date may be generic,that is, partially unspecified. Then the entry
applies to all dates that match the specification. If the date does not
contain a year, it is generic and applies to any year. Alternatively,
month, day, or year can be '*'; this matches any month, day, or year,
respectively. Thus, a diary entry ‘3///&lt;a href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id2"&gt;&lt;span class="problematic" id="id3"&gt;*&lt;/span&gt;&lt;/a&gt;' matches any day in March of
any year; so does ‘march /'.&lt;/p&gt;
&lt;div class="system-message" id="id2"&gt;
&lt;p class="system-message-title"&gt;System Message: WARNING/2 (&lt;span class="docutils literal"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;, line 1085); &lt;em&gt;&lt;a href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id3"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Inline emphasis start-string without end-string.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;If you prefer the European style of writing dates (in which the day
comes before the month), or the ISO style (in which the order is year,
month, day), type M-x calendar-set-date-style while in the calendar, or
customize the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-date-style&lt;/span&gt;&lt;/code&gt;. This affects how diary
dates are interpreted, date display, and the order in which some
commands expect their arguments to be given.&lt;/p&gt;
&lt;p&gt;You can use the name of a day of the week as a generic date which
applies to any date falling on that day of the week. You can abbreviate
the day of the week as described above, or spell it in full; case is not
significant.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="commands-to-add-to-the-diary"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id28"&gt;31.10.4 Commands to Add to the Diary&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;While in the calendar, there are several commands to create diary
entries. The basic commands are listed here; more sophisticated commands
are in the next section (see &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Special-Diary-Entries"&gt;Special Diary
Entries&lt;/a&gt;).
Entries can also be based on non-Gregorian calendars. See &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Non_002dGregorian-Diary"&gt;Non-Gregorian
Diary&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;i d&lt;/p&gt;
&lt;p&gt;Add a diary entry for the selected date (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-insert-entry&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i w&lt;/p&gt;
&lt;p&gt;Add a diary entry for the selected day of the week
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-insert-weekly-entry&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i m&lt;/p&gt;
&lt;p&gt;Add a diary entry for the selected day of the month
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-insert-monthly-entry&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i y&lt;/p&gt;
&lt;p&gt;Add a diary entry for the selected day of the year
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-insert-yearly-entry&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can make a diary entry for a specific date by selecting that date in
the calendar window and typing the i d command. This command displays
the end of your diary file in another window and inserts the date; you
can then type the rest of the diary entry.&lt;/p&gt;
&lt;p&gt;If you want to make a diary entry that applies to a specific day of the
week, select that day of the week (any occurrence will do) and type i w.
This inserts the day-of-week as a generic date; you can then type the
rest of the diary entry. You can make a monthly diary entry in the same
fashion: select the day of the month, use the i m command, and type the
rest of the entry. Similarly, you can insert a yearly diary entry with
the i y command.&lt;/p&gt;
&lt;p&gt;All of the above commands make marking diary entries by default. To make
a nonmarking diary entry, give a prefix argument to the command. For
example, C-u i w makes a nonmarking weekly diary entry.&lt;/p&gt;
&lt;p&gt;When you modify the diary file, be sure to save the file before exiting
Emacs. Saving the diary file after using any of the above insertion
commands will automatically update the diary marks in the calendar
window, if appropriate. You can use the command &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-redraw&lt;/span&gt;&lt;/code&gt; to
force an update at any time.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="special-diary-entries"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id29"&gt;31.10.5 Special Diary Entries&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;In addition to entries based on calendar dates, the diary file can
contain sexp entries for regular events such as anniversaries. These
entries are based on Lisp expressions (sexps) that Emacs evaluates as it
scans the diary file. Instead of a date, a sexp entry contains '%%'
followed by a Lisp expression which must begin and end with parentheses.
The Lisp expression determines which dates the entry applies to.&lt;/p&gt;
&lt;p&gt;Calendar mode provides commands to insert certain commonly used sexp
entries:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;i a&lt;/p&gt;
&lt;p&gt;Add an anniversary diary entry for the selected date
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-insert-anniversary-entry&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i b&lt;/p&gt;
&lt;p&gt;Add a block diary entry for the current region
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-insert-block-entry&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i c&lt;/p&gt;
&lt;p&gt;Add a cyclic diary entry starting at the date
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-insert-cyclic-entry&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;If you want to make a diary entry that applies to the anniversary of
a specific date, move point to that date and use the i a command.
This displays the end of your diary file in another window and
inserts the anniversary description; you can then type the rest of
the diary entry. The entry looks like this:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="literal-block"&gt;%%(diary-anniversary 10 31 1988) Arthur's birthday&lt;/pre&gt;
&lt;p&gt;This entry applies to October 31 in any year after 1988; '10 31 1988'
specifies the date. (If you are using the European or ISO calendar
style, the input order of month, day and year is different.) The reason
this expression requires a beginning year is that advanced diary
functions can use it to calculate the number of elapsed years.&lt;/p&gt;
&lt;p&gt;A block diary entry applies to a specified range of consecutive dates.
Here is a block diary entry that applies to all dates from June 24, 2012
through July 10, 2012:&lt;/p&gt;
&lt;pre class="literal-block"&gt;%%(diary-block 6 24 2012 7 10 2012) Vacation&lt;/pre&gt;
&lt;p&gt;The '6 24 2012' indicates the starting date and the '7 10 2012'
indicates the stopping date. (Again, if you are using the European or
ISO calendar style, the input order of month, day and year is
different.)&lt;/p&gt;
&lt;p&gt;To insert a block entry, place point and the mark on the two dates that
begin and end the range, and type i b. This command displays the end of
your diary file in another window and inserts the block description; you
can then type the diary entry.&lt;/p&gt;
&lt;p&gt;Cyclic diary entries repeat after a fixed interval of days. To create
one, select the starting date and use the i c command. The command
prompts for the length of interval, then inserts the entry, which looks
like this:&lt;/p&gt;
&lt;pre class="literal-block"&gt;%%(diary-cyclic 50 3 1 2012) Renew medication&lt;/pre&gt;
&lt;p&gt;This entry applies to March 1, 2012 and every 50th day following; '3 1
2012' specifies the starting date. (If you are using the European or ISO
calendar style, the input order of month, day and year is different.)&lt;/p&gt;
&lt;p&gt;All three of these commands make marking diary entries. To insert a
nonmarking entry, give a prefix argument to the command. For example,
C-u i a makes a nonmarking anniversary diary entry.&lt;/p&gt;
&lt;p&gt;Marking sexp diary entries in the calendar can be time-consuming, since
every date visible in the calendar window must be individually checked.
So it's a good idea to make sexp diary entries nonmarking (with '&amp;amp;')
when possible.&lt;/p&gt;
&lt;p&gt;Another sophisticated kind of sexp entry, a floating diary entry,
specifies a regularly occurring event by offsets specified in days,
weeks, and months. It is comparable to a crontab entry interpreted by
the &lt;code class="docutils literal"&gt;cron&lt;/code&gt; utility. Here is a nonmarking, floating diary entry that
applies to the fourth Thursday in November:&lt;/p&gt;
&lt;pre class="literal-block"&gt;&amp;amp;%%(diary-float 11 4 4) American Thanksgiving&lt;/pre&gt;
&lt;p&gt;The 11 specifies November (the eleventh month), the 4 specifies Thursday
(the fourth day of the week, where Sunday is numbered zero), and the
second 4 specifies the fourth Thursday (1 would mean "first", 2 would
mean "second", −2 would mean "second-to-last", and so on). The month can
be a single month or a list of months. Thus you could change the 11
above to ‘'(1 2 3)' and have the entry apply to the last Thursday of
January, February, and March. If the month is &lt;code class="docutils literal"&gt;t&lt;/code&gt;, the entry applies
to all months of the year.&lt;/p&gt;
&lt;p&gt;Each of the standard sexp diary entries takes an optional parameter
specifying the name of a face or a single-character string to use when
marking the entry in the calendar. Most generally, sexp diary entries
can perform arbitrary computations to determine when they apply.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="appointments"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id30"&gt;31.10.6 Appointments&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;If you have a diary entry for an appointment, and that diary entry
begins with a recognizable time of day, Emacs can warn you in advance
that an appointment is pending. Emacs alerts you to the appointment by
displaying a message in your chosen format, as specified by the variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-display-format&lt;/span&gt;&lt;/code&gt;. If the value of &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-audible&lt;/span&gt;&lt;/code&gt; is
non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt;, the warning includes an audible reminder. In addition, if
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-display-mode-line&lt;/span&gt;&lt;/code&gt; is non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt;, Emacs displays the number
of minutes to the appointment on the mode line.&lt;/p&gt;
&lt;p&gt;If &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-display-format&lt;/span&gt;&lt;/code&gt; has the value &lt;code class="docutils literal"&gt;window&lt;/code&gt;, then the variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-display-duration&lt;/span&gt;&lt;/code&gt; controls how long the reminder window is
visible for; and the variables &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-disp-window-function&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-delete-window-function&lt;/span&gt;&lt;/code&gt; give the names of functions used to
create and destroy the window, respectively.&lt;/p&gt;
&lt;p&gt;To enable appointment notification, type M-x appt-activate. With a
positive argument, it enables notification; with a negative argument, it
disables notification; with no argument, it toggles. Enabling
notification also sets up an appointment list for today from the diary
file, giving all diary entries found with recognizable times of day, and
reminds you just before each of them.&lt;/p&gt;
&lt;p&gt;For example, suppose the diary file contains these lines:&lt;/p&gt;
&lt;pre class="literal-block"&gt;Monday
  9:30am Coffee break
 12:00pm Lunch&lt;/pre&gt;
&lt;p&gt;Then on Mondays, you will be reminded at around 9:20am about your coffee
break and at around 11:50am about lunch. The variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-message-warning-time&lt;/span&gt;&lt;/code&gt; specifies how many minutes (default 12) in
advance to warn you. This is a default warning time. Each appointment
can specify a different warning time by adding a piece matching
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-warning-time-regexp&lt;/span&gt;&lt;/code&gt; (see that variable's documentation for
details).&lt;/p&gt;
&lt;p&gt;You can write times in am/pm style (with '12:00am' standing for midnight
and '12:00pm' standing for noon), or 24-hour European/military style.
You need not be consistent; your diary file can have a mixture of the
two styles. Times must be at the beginning of diary entries if they are
to be recognized.&lt;/p&gt;
&lt;p&gt;Emacs updates the appointments list from the diary file automatically
just after midnight. You can force an update at any time by re-enabling
appointment notification. Both these actions also display the day's
diary buffer, unless you set &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;appt-display-diary&lt;/span&gt;&lt;/code&gt; to &lt;code class="docutils literal"&gt;nil&lt;/code&gt;. The
appointments list is also updated whenever the diary file (or a file it
includes; see &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Fancy-Diary-Display"&gt;Fancy Diary
Display&lt;/a&gt;)
is saved. If you use the Org Mode and keep appointments in your Org
agenda files, you can add those appointments to the list using the
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;org-agenda-to-appt&lt;/span&gt;&lt;/code&gt; command. See &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/org.html#Weekly_002fdaily-agenda"&gt;Appointment
reminders&lt;/a&gt;,
for more about that command.&lt;/p&gt;
&lt;p&gt;You can also use the appointment notification facility like an alarm
clock. The command M-x appt-add adds entries to the appointment list
without affecting your diary file. You delete entries from the
appointment list with M-x appt-delete.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="importing-and-exporting-diary-entries"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id31"&gt;31.10.7 Importing and Exporting Diary Entries&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;You can transfer diary entries between Emacs diary files and a variety
of other formats.&lt;/p&gt;
&lt;p&gt;You can import diary entries from Outlook-generated appointment
messages. While viewing such a message in Rmail or Gnus, do M-x
diary-from-outlook to import the entry. You can make this command
recognize additional appointment message formats by customizing the
variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-outlook-formats&lt;/span&gt;&lt;/code&gt;. Other mail clients can set
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-from-outlook-function&lt;/span&gt;&lt;/code&gt; to an appropriate value.&lt;/p&gt;
&lt;p&gt;The icalendar package allows you to transfer data between your Emacs
diary file and iCalendar files, which are defined in RFC 2445—Internet
Calendaring and Scheduling Core Object Specification (iCalendar) (as
well as the earlier vCalendar format).&lt;/p&gt;
&lt;p&gt;The command &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;icalendar-import-buffer&lt;/span&gt;&lt;/code&gt; extracts iCalendar data from the
current buffer and adds it to your diary file. This function is also
suitable for automatic extraction of iCalendar data; for example with
the Rmail mail client one could use:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(add-hook 'rmail-show-message-hook 'icalendar-import-buffer)&lt;/pre&gt;
&lt;p&gt;The command &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;icalendar-import-file&lt;/span&gt;&lt;/code&gt; imports an iCalendar file and adds
the results to an Emacs diary file. For example:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(icalendar-import-file "/here/is/calendar.ics"
                       "/there/goes/ical-diary")&lt;/pre&gt;
&lt;p&gt;You can use an &lt;code class="docutils literal"&gt;#include&lt;/code&gt; directive to add the import file contents to
the main diary file, if these are different files. See &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Fancy-Diary-Display"&gt;Fancy Diary
Display&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Use &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;icalendar-export-file&lt;/span&gt;&lt;/code&gt; to interactively export an entire Emacs
diary file to iCalendar format. To export only a part of a diary file,
mark the relevant area, and call &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;icalendar-export-region&lt;/span&gt;&lt;/code&gt;. In both
cases, Emacs appends the result to the target file.&lt;/p&gt;
&lt;div class="section" id="daylight-saving-time"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id32"&gt;31.11 Daylight Saving Time&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Emacs understands the difference between standard time and daylight
saving time—the times given for sunrise, sunset, solstices, equinoxes,
and the phases of the moon take that into account. The rules for
daylight saving time vary from place to place and have also varied
historically from year to year. To do the job properly, Emacs needs to
know which rules to use.&lt;/p&gt;
&lt;p&gt;Some operating systems keep track of the rules that apply to the place
where you are; on these systems, Emacs gets the information it needs
from the system automatically. If some or all of this information is
missing, Emacs fills in the gaps with the rules currently used in
Cambridge, Massachusetts. If the resulting rules are not what you want,
you can tell Emacs the rules to use by setting certain variables:
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-daylight-savings-starts&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-daylight-savings-ends&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;These values should be Lisp expressions that refer to the variable
&lt;code class="docutils literal"&gt;year&lt;/code&gt;, and evaluate to the Gregorian date on which daylight saving
time starts or (respectively) ends, in the form of a list &lt;code class="docutils literal"&gt;(=month day
year&lt;/code&gt;)=. The values should be &lt;code class="docutils literal"&gt;nil&lt;/code&gt; if your area does not use
daylight saving time.&lt;/p&gt;
&lt;p&gt;Emacs uses these expressions to determine the starting date of daylight
saving time for the holiday list and for correcting times of day in the
solar and lunar calculations.&lt;/p&gt;
&lt;p&gt;The values for Cambridge, Massachusetts are as follows:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(calendar-nth-named-day 2 0 3 year)
(calendar-nth-named-day 1 0 11 year)&lt;/pre&gt;
&lt;p&gt;That is, the second 0th day (Sunday) of the third month (March) in the
year specified by &lt;code class="docutils literal"&gt;year&lt;/code&gt;, and the first Sunday of the eleventh month
(November) of that year. If daylight saving time were changed to start
on October 1, you would set &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-daylight-savings-starts&lt;/span&gt;&lt;/code&gt; to
this:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(list 10 1 year)&lt;/pre&gt;
&lt;p&gt;If there is no daylight saving time at your location, or if you want all
times in standard time, set &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-daylight-savings-starts&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-daylight-savings-ends&lt;/span&gt;&lt;/code&gt; to &lt;code class="docutils literal"&gt;nil&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-daylight-time-offset&lt;/span&gt;&lt;/code&gt; specifies the difference
between daylight saving time and standard time, measured in minutes. The
value for Cambridge, Massachusetts is 60.&lt;/p&gt;
&lt;p&gt;Finally, the two variables &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-daylight-savings-starts-time&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-daylight-savings-ends-time&lt;/span&gt;&lt;/code&gt; specify the number of minutes
after midnight local time when the transition to and from daylight
saving time should occur. For Cambridge, Massachusetts both variables'
values are 120.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="summing-time-intervals"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id33"&gt;31.12 Summing Time Intervals&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;The timeclock package adds up time intervals, so you can (for instance)
keep track of how much time you spend working on particular projects. (A
more advanced alternative is to use the Org Mode's facilities for
clocking time, see &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/org.html#Clocking-work-time"&gt;Clocking work
time&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Use the M-x timeclock-in command when you start working on a project,
and M-x timeclock-out command when you're done. Each time you do this,
it adds one time interval to the record of the project. You can change
to working on a different project with M-x timeclock-change.&lt;/p&gt;
&lt;p&gt;Once you've collected data from a number of time intervals, you can use
M-x timeclock-workday-remaining to see how much time is left to work
today (assuming a typical average of 8 hours a day), and M-x
timeclock-when-to-leave which will calculate when you're done.&lt;/p&gt;
&lt;p&gt;If you want Emacs to display the amount of time left of your workday in
the mode line, either customize the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;timeclock-modeline-display&lt;/span&gt;&lt;/code&gt;
variable and set its value to &lt;code class="docutils literal"&gt;t&lt;/code&gt;, or invoke the M-x
timeclock-modeline-display command.&lt;/p&gt;
&lt;p&gt;Terminating the current Emacs session might or might not mean that you
have stopped working on the project and, by default, Emacs asks you. You
can, however, customize the value of the variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;timeclock-ask-before-exiting&lt;/span&gt;&lt;/code&gt; to &lt;code class="docutils literal"&gt;nil&lt;/code&gt; to avoid the question; then,
only an explicit M-x timeclock-out or M-x timeclock-change will tell
Emacs that the current interval is over.&lt;/p&gt;
&lt;p&gt;The timeclock functions work by accumulating the data in a file called
~/.emacs.d/timelog. You can specify a different name for this file by
customizing the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;timeclock-file&lt;/span&gt;&lt;/code&gt;. If you edit the timeclock
file manually, or if you change the value of any of timeclock's
customizable variables, you should run the command M-x
timeclock-reread-log to update the data in Emacs from the file.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="more-advanced-features-of-the-calendar-and-diary"&gt;
&lt;h3&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id34"&gt;31.13 More advanced features of the Calendar and Diary&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;This section describes some of the more advanced/specialized features of
the calendar and diary. It starts with some of the many ways in which
you can customize the calendar and diary to suit your personal tastes.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="customizing-the-calendar"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id35"&gt;31.13.1 Customizing the Calendar&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The calendar display unfortunately cannot be changed from three months,
but you can customize the whitespace used by setting the variables:
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-left-margin&lt;/span&gt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-day-header-width&lt;/span&gt;&lt;/code&gt;,
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-day-digit-width&lt;/span&gt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-column-width&lt;/span&gt;&lt;/code&gt;, and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-intermonth-spacing&lt;/span&gt;&lt;/code&gt;. To display text &lt;em&gt;between&lt;/em&gt; the months,
for example week numbers, customize the variables
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-intermonth-header&lt;/span&gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-intermonth-text&lt;/span&gt;&lt;/code&gt; as
described in their documentation.&lt;/p&gt;
&lt;p&gt;The variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-month-header&lt;/span&gt;&lt;/code&gt; controls the text that appears
above each month in the calendar. By default, it shows the month and
year. The variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-day-header-array&lt;/span&gt;&lt;/code&gt; controls the text that
appears above each day's column in every month. By default, it shows the
first two letters of each day's name.&lt;/p&gt;
&lt;p&gt;The variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-holiday-marker&lt;/span&gt;&lt;/code&gt; specifies how to mark a date
that is a holiday. Its value may be a single-character string to insert
next to the date, or a face name to use for displaying the date.
Likewise, the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-entry-marker&lt;/span&gt;&lt;/code&gt; specifies how to mark a
date that has diary entries. The function &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mark-today&lt;/span&gt;&lt;/code&gt; uses
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-today-marker&lt;/span&gt;&lt;/code&gt; to mark today's date. By default, the calendar
uses faces named &lt;code class="docutils literal"&gt;holiday&lt;/code&gt;, &lt;code class="docutils literal"&gt;diary&lt;/code&gt;, and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-today&lt;/span&gt;&lt;/code&gt; for
these purposes.&lt;/p&gt;
&lt;p&gt;Starting the calendar runs the normal hook
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-initial-window-hook&lt;/span&gt;&lt;/code&gt;. Recomputation of the calendar display
does not run this hook. But if you leave the calendar with the q command
and reenter it, the hook runs again.&lt;/p&gt;
&lt;p&gt;The variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-today-visible-hook&lt;/span&gt;&lt;/code&gt; is a normal hook run after
the calendar buffer has been prepared with the calendar, when the
current date is visible in the window. One use of this hook is to mark
today's date; to do that use either of the functions
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mark-today&lt;/span&gt;&lt;/code&gt; or &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-star-date&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(add-hook 'calendar-today-visible-hook 'calendar-mark-today)&lt;/pre&gt;
&lt;p&gt;A similar normal hook, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-today-invisible-hook&lt;/span&gt;&lt;/code&gt; is run if the
current date is &lt;em&gt;not&lt;/em&gt; visible in the window.&lt;/p&gt;
&lt;p&gt;Each of the calendar cursor motion commands runs the hook
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-move-hook&lt;/span&gt;&lt;/code&gt; after it moves the cursor.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="customizing-the-holidays"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id36"&gt;31.13.2 Customizing the Holidays&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;There are several variables listing the default holidays that Emacs
knows about. These are: &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-general-holidays&lt;/span&gt;&lt;/code&gt;,
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-local-holidays&lt;/span&gt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-solar-holidays&lt;/span&gt;&lt;/code&gt;,
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-bahai-holidays&lt;/span&gt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-christian-holidays&lt;/span&gt;&lt;/code&gt;,
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-hebrew-holidays&lt;/span&gt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-islamic-holidays&lt;/span&gt;&lt;/code&gt;,
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-oriental-holidays&lt;/span&gt;&lt;/code&gt;, and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-other-holidays&lt;/span&gt;&lt;/code&gt;. The names
should be self-explanatory; e.g., &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-solar-holidays&lt;/span&gt;&lt;/code&gt; lists sun-
and moon-related holidays.&lt;/p&gt;
&lt;p&gt;You can customize these lists of holidays to your own needs, deleting or
adding holidays as described below. Set any of them to &lt;code class="docutils literal"&gt;nil&lt;/code&gt; to not
show the associated holidays.&lt;/p&gt;
&lt;p&gt;The general holidays are, by default, holidays common throughout the
United States. In contrast, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-local-holidays&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-other-holidays&lt;/span&gt;&lt;/code&gt; are both empty by default. These are intended
for system-wide settings and your individual use, respectively.&lt;/p&gt;
&lt;p&gt;By default, Emacs does not include all the holidays of the religions
that it knows, only those commonly found in secular calendars. For a
more extensive collection of religious holidays, you can set any (or
all) of the variables &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-bahai-all-holidays-flag&lt;/span&gt;&lt;/code&gt;,
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-christian-all-holidays-flag&lt;/span&gt;&lt;/code&gt;,
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-hebrew-all-holidays-flag&lt;/span&gt;&lt;/code&gt;, or
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-islamic-all-holidays-flag&lt;/span&gt;&lt;/code&gt; to &lt;code class="docutils literal"&gt;t&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Each of the holiday variables is a list of holiday forms, each form
describing a holiday (or sometimes a list of holidays). Here is a table
of the possible kinds of holiday form. Day numbers and month numbers
count starting from 1, but dayname numbers count Sunday as 0. The
argument string is always the description of the holiday, as a string.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;(holiday-fixed=month&lt;/span&gt; day string&lt;/code&gt;)=&lt;/p&gt;
&lt;p&gt;A fixed date on the Gregorian calendar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;=(holiday-float=month dayname k string&lt;/p&gt;
&lt;p&gt;​ &amp;amp;optional day) The kth dayname (dayname=0 for Sunday, and so on)
after or before Gregorian date month, day. Negative k means count
back from the end of the month. Optional day defaults to 1 if k is
positive, and the last day of month otherwise.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;(holiday-chinese=month&lt;/span&gt; day string&lt;/code&gt;)=&lt;/p&gt;
&lt;p&gt;A fixed date on the Chinese calendar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;(holiday-hebrew=month&lt;/span&gt; day string&lt;/code&gt;)=&lt;/p&gt;
&lt;p&gt;A fixed date on the Hebrew calendar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;(holiday-islamic=month&lt;/span&gt; day string&lt;/code&gt;)=&lt;/p&gt;
&lt;p&gt;A fixed date on the Islamic calendar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;(holiday-julian=month&lt;/span&gt; day string&lt;/code&gt;)=&lt;/p&gt;
&lt;p&gt;A fixed date on the Julian calendar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;(holiday-sexp=sexp&lt;/span&gt; string&lt;/code&gt;)=&lt;/p&gt;
&lt;p&gt;A date calculated by the Lisp expression sexp. The expression should
use the variable &lt;code class="docutils literal"&gt;year&lt;/code&gt; to compute and return the date of a holiday
in the form of a list &lt;code class="docutils literal"&gt;(=month day year&lt;/code&gt;)=, or &lt;code class="docutils literal"&gt;nil&lt;/code&gt; if the
holiday doesn't happen this year.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;(if=condition &lt;span class="pre"&gt;holiday-form&lt;/span&gt;&lt;/code&gt;)=&lt;/p&gt;
&lt;p&gt;A holiday that happens only if condition is true.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;(=function [args]&lt;/code&gt;)=&lt;/p&gt;
&lt;p&gt;A list of dates calculated by the function function, called with
arguments args.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, suppose you want to add Bastille Day, celebrated in France
on July 14 (i.e., the fourteenth day of the seventh month). You can do
this as follows:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(setq holiday-other-holidays '((holiday-fixed 7 14 "Bastille Day")))&lt;/pre&gt;
&lt;p&gt;Many holidays occur on a specific day of the week, at a specific time of
month. Here is a holiday form describing Hurricane Supplication Day,
celebrated in the Virgin Islands on the fourth Monday in July:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(holiday-float 7 1 4 "Hurricane Supplication Day")&lt;/pre&gt;
&lt;p&gt;Here the 7 specifies July, the 1 specifies Monday (Sunday is 0, Tuesday
is 2, and so on), and the 4 specifies the fourth occurrence in the month
(1 specifies the first occurrence, 2 the second occurrence, −1 the last
occurrence, −2 the second-to-last occurrence, and so on).&lt;/p&gt;
&lt;p&gt;You can specify holidays that occur on fixed days of the Bahá'í,
Chinese, Hebrew, Islamic, and Julian calendars too. For example,&lt;/p&gt;
&lt;pre class="literal-block"&gt;(setq holiday-other-holidays
      '((holiday-hebrew 10 2 "Last day of Hanukkah")
        (holiday-islamic 3 12 "Mohammed's Birthday")
        (holiday-julian 4 2 "Jefferson's Birthday")))&lt;/pre&gt;
&lt;p&gt;adds the last day of Hanukkah (since the Hebrew months are numbered with
1 starting from Nisan), the Islamic feast celebrating Mohammed's
birthday (since the Islamic months are numbered from 1 starting with
Muharram), and Thomas Jefferson's birthday, which is 2 April 1743 on the
Julian calendar.&lt;/p&gt;
&lt;p&gt;To include a holiday conditionally, use either Emacs Lisp's &lt;code class="docutils literal"&gt;if&lt;/code&gt; or
the &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-sexp&lt;/span&gt;&lt;/code&gt; form. For example, American presidential elections
occur on the first Tuesday after the first Monday in November of years
divisible by 4:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(holiday-sexp '(if (zerop (% year 4))
                   (calendar-gregorian-from-absolute
                    (1+ (calendar-dayname-on-or-before
                          1 (+ 6 (calendar-absolute-from-gregorian
                                  (list 11 1 year)))))))
              "US Presidential Election")&lt;/pre&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;pre class="literal-block"&gt;(if (zerop (% displayed-year 4))
    (holiday-fixed 11
           (calendar-extract-day
             (calendar-gregorian-from-absolute
               (1+ (calendar-dayname-on-or-before
                     1 (+ 6 (calendar-absolute-from-gregorian
                              (list 11 1 displayed-year)))))))
           "US Presidential Election"))&lt;/pre&gt;
&lt;p&gt;Some holidays just don't fit into any of these forms because special
calculations are involved in their determination. In such cases you must
write a Lisp function to do the calculation. To include eclipses, for
example, add &lt;code class="docutils literal"&gt;(eclipses)&lt;/code&gt; to &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;holiday-other-holidays&lt;/span&gt;&lt;/code&gt; and write an
Emacs Lisp function &lt;code class="docutils literal"&gt;eclipses&lt;/code&gt; that returns a (possibly empty) list of
the relevant Gregorian dates among the range visible in the calendar
window, with descriptive strings, like this:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(((6 4 2012) "Lunar Eclipse") ((11 13 2012) "Solar Eclipse") ... )&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="converting-from-the-mayan-calendar"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id37"&gt;31.13.3 Converting from the Mayan Calendar&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Here are the commands to select dates based on the Mayan calendar:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;g m l&lt;/p&gt;
&lt;p&gt;Move to a date specified by the long count calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mayan-goto-long-count-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g m n t&lt;/p&gt;
&lt;p&gt;Move to the next occurrence of a place in the tzolkin calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mayan-next-tzolkin-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g m p t&lt;/p&gt;
&lt;p&gt;Move to the previous occurrence of a place in the tzolkin calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mayan-previous-tzolkin-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g m n h&lt;/p&gt;
&lt;p&gt;Move to the next occurrence of a place in the haab calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mayan-next-haab-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g m p h&lt;/p&gt;
&lt;p&gt;Move to the previous occurrence of a place in the haab calendar
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mayan-previous-haab-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g m n c&lt;/p&gt;
&lt;p&gt;Move to the next occurrence of a place in the calendar round
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mayan-next-calendar-round-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;g m p c&lt;/p&gt;
&lt;p&gt;Move to the previous occurrence of a place in the calendar round
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-mayan-previous-calendar-round-date&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;To understand these commands, you need to understand the Mayan
calendars. The long count is a counting of days with these units:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;pre class="literal-block"&gt;1 kin = 1 day   1 uinal = 20 kin   1 tun = 18 uinal
1 katun = 20 tun   1 baktun = 20 katun&lt;/pre&gt;
&lt;p&gt;Thus, the long count date 12.16.11.16.6 means 12 baktun, 16 katun, 11
tun, 16 uinal, and 6 kin. The Emacs calendar can handle Mayan long count
dates as early as 7.17.18.13.3, but no earlier. When you use the g m l
command, type the Mayan long count date with the baktun, katun, tun,
uinal, and kin separated by periods.&lt;/p&gt;
&lt;p&gt;The Mayan tzolkin calendar is a cycle of 260 days formed by a pair of
independent cycles of 13 and 20 days. Since this cycle repeats
endlessly, Emacs provides commands to move backward and forward to the
previous or next point in the cycle. Type g m p t to go to the previous
tzolkin date; Emacs asks you for a tzolkin date and moves point to the
previous occurrence of that date. Similarly, type g m n t to go to the
next occurrence of a tzolkin date.&lt;/p&gt;
&lt;p&gt;The Mayan haab calendar is a cycle of 365 days arranged as 18 months of
20 days each, followed by a 5-day monthless period. Like the tzolkin
cycle, this cycle repeats endlessly, and there are commands to move
backward and forward to the previous or next point in the cycle. Type g
m p h to go to the previous haab date; Emacs asks you for a haab date
and moves point to the previous occurrence of that date. Similarly, type
g m n h to go to the next occurrence of a haab date.&lt;/p&gt;
&lt;p&gt;The Maya also used the combination of the tzolkin date and the haab
date. This combination is a cycle of about 52 years called a &lt;em&gt;calendar
round&lt;/em&gt;. If you type g m p c, Emacs asks you for both a haab and a
tzolkin date and then moves point to the previous occurrence of that
combination. Use g m n c to move point to the next occurrence of a
combination. These commands signal an error if the haab/tzolkin date
combination you have typed is impossible.&lt;/p&gt;
&lt;p&gt;Emacs uses strict completion (see &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Completion-Exit"&gt;Completion
Exit&lt;/a&gt;)
whenever it asks you to type a Mayan name, so you don't have to worry
about spelling.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="date-display-format"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id38"&gt;31.13.4 Date Display Format&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;You can customize the way dates are displayed in the diary, mode lines,
and messages by setting &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-date-display-form&lt;/span&gt;&lt;/code&gt;. This variable
holds a list of expressions that can involve the variables &lt;code class="docutils literal"&gt;month&lt;/code&gt;,
&lt;code class="docutils literal"&gt;day&lt;/code&gt;, and &lt;code class="docutils literal"&gt;year&lt;/code&gt;, which are all numbers in string form, and
&lt;code class="docutils literal"&gt;monthname&lt;/code&gt; and &lt;code class="docutils literal"&gt;dayname&lt;/code&gt;, which are both alphabetic strings. In the
American style, the default value of this list is as follows:&lt;/p&gt;
&lt;pre class="literal-block"&gt;((if dayname (concat dayname ", ")) monthname " " day ", " year)&lt;/pre&gt;
&lt;p&gt;while in the European style this value is the default:&lt;/p&gt;
&lt;pre class="literal-block"&gt;((if dayname (concat dayname ", ")) day " " monthname " " year)&lt;/pre&gt;
&lt;p&gt;The default ISO date representation is:&lt;/p&gt;
&lt;pre class="literal-block"&gt;((format "%s-%.2d-%.2d" year (string-to-number month)
         (string-to-number day)))&lt;/pre&gt;
&lt;p&gt;Another typical American format is:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(month "/" day "/" (substring year -2))&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="section" id="time-display-format"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id39"&gt;31.13.5 Time Display Format&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The calendar and diary by default display times of day in the
conventional American style with the hours from 1 through 12, minutes,
and either 'am' or 'pm'. If you prefer the European style, also known in
the US as military, in which the hours go from 00 to 23, you can alter
the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-time-display-form&lt;/span&gt;&lt;/code&gt;. This variable is a list of
expressions that can involve the variables &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;12-hours&lt;/span&gt;&lt;/code&gt;, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;24-hours&lt;/span&gt;&lt;/code&gt;,
and &lt;code class="docutils literal"&gt;minutes&lt;/code&gt;, which are all numbers in string form, and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;am-pm&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;time-zone&lt;/span&gt;&lt;/code&gt;, which are both alphabetic strings. The default value is:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(12-hours ":" minutes am-pm
          (if time-zone " (") time-zone (if time-zone ")"))&lt;/pre&gt;
&lt;p&gt;Here is a value that provides European style times:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(24-hours ":" minutes
          (if time-zone " (") time-zone (if time-zone ")"))&lt;/pre&gt;
&lt;p&gt;Note that few calendar functions return a time of day (at present, only
solar functions).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="customizing-the-diary"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id40"&gt;31.13.6 Customizing the Diary&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Ordinarily, the diary window indicates any holidays that fall on the
date of the diary entries, either in the mode line or the buffer itself.
The process of checking for holidays can be slow, depending on the
defined holidays. In that case, setting &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-show-holidays-flag&lt;/span&gt;&lt;/code&gt; to
&lt;code class="docutils literal"&gt;nil&lt;/code&gt; will speed up the diary display.&lt;/p&gt;
&lt;p&gt;The variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-number-of-entries&lt;/span&gt;&lt;/code&gt; controls the number of days of
diary entries to be displayed at one time. It affects the initial
display when &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-view-diary-initially-flag&lt;/span&gt;&lt;/code&gt; is &lt;code class="docutils literal"&gt;t&lt;/code&gt;, as well as
the command M-x diary. For example, a value of 1 (the default) displays
only the current day's diary entries, whereas a value of 2 will also
show the next day's entries. The value can also be a vector of seven
integers: for example, if the value is &lt;code class="docutils literal"&gt;[0 2 2 2 2 4 1]&lt;/code&gt; then no diary
entries appear on Sunday, the current date's and the next day's diary
entries appear Monday through Thursday, Friday through Monday's entries
appear on Friday, while on Saturday only that day's entries appear.&lt;/p&gt;
&lt;p&gt;You can customize the form of dates in your diary file by setting the
variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-date-forms&lt;/span&gt;&lt;/code&gt;. This variable is a list of patterns for
recognizing a date. Each date pattern is a list whose elements may be
regular expressions (see &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/elisp.html#Regular-Expressions"&gt;Regular
Expressions&lt;/a&gt;)
or the symbols &lt;code class="docutils literal"&gt;month&lt;/code&gt;, &lt;code class="docutils literal"&gt;day&lt;/code&gt;, &lt;code class="docutils literal"&gt;year&lt;/code&gt;, &lt;code class="docutils literal"&gt;monthname&lt;/code&gt;, and
&lt;code class="docutils literal"&gt;dayname&lt;/code&gt;. All these elements serve as patterns that match certain
kinds of text in the diary file. In order for the date pattern as a
whole to match, all of its elements must match consecutively.&lt;/p&gt;
&lt;p&gt;A regular expression in a date pattern matches in its usual fashion,
using the standard syntax table altered so that ‘&lt;a href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id4"&gt;&lt;span class="problematic" id="id5"&gt;*&lt;/span&gt;&lt;/a&gt;' is a word
constituent.&lt;/p&gt;
&lt;div class="system-message" id="id4"&gt;
&lt;p class="system-message-title"&gt;System Message: WARNING/2 (&lt;span class="docutils literal"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;, line 1853); &lt;em&gt;&lt;a href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id5"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Inline emphasis start-string without end-string.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;The symbols &lt;code class="docutils literal"&gt;month&lt;/code&gt;, &lt;code class="docutils literal"&gt;day&lt;/code&gt;, &lt;code class="docutils literal"&gt;year&lt;/code&gt;, &lt;code class="docutils literal"&gt;monthname&lt;/code&gt;, and &lt;code class="docutils literal"&gt;dayname&lt;/code&gt;
match the month number, day number, year number, month name, and day
name of the date being considered. The symbols that match numbers allow
leading zeros; those that match names allow capitalization and
abbreviation (as specified by &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-month-abbrev-array&lt;/span&gt;&lt;/code&gt; and
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;calendar-day-abbrev-array&lt;/span&gt;&lt;/code&gt;). All the symbols can match '*'; since ‘&lt;a href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id6"&gt;&lt;span class="problematic" id="id7"&gt;*&lt;/span&gt;&lt;/a&gt;'
in a diary entry means "any day", "any month", and so on, it should
match regardless of the date being considered.&lt;/p&gt;
&lt;div class="system-message" id="id6"&gt;
&lt;p class="system-message-title"&gt;System Message: WARNING/2 (&lt;span class="docutils literal"&gt;&amp;lt;string&amp;gt;&lt;/span&gt;, line 1857); &lt;em&gt;&lt;a href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id7"&gt;backlink&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Inline emphasis start-string without end-string.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;The default value of &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-date-forms&lt;/span&gt;&lt;/code&gt; in the American style is
provided by &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-american-date-forms&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;((month "/" day "[^/0-9]")
 (month "/" day "/" year "[^0-9]")
 (monthname " *" day "[^,0-9]")
 (monthname " *" day ", *" year "[^0-9]")
 (dayname "\\W"))&lt;/pre&gt;
&lt;p&gt;The variables &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-european-date-forms&lt;/span&gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-iso-date-forms&lt;/span&gt;&lt;/code&gt;
provide other default styles.&lt;/p&gt;
&lt;p&gt;The date patterns in the list must be &lt;em&gt;mutually exclusive&lt;/em&gt; and must not
match any portion of the diary entry itself, just the date and one
character of whitespace. If, to be mutually exclusive, the pattern must
match a portion of the diary entry text—beyond the whitespace that ends
the date—then the first element of the date pattern &lt;em&gt;must&lt;/em&gt; be
&lt;code class="docutils literal"&gt;backup&lt;/code&gt;. This causes the date recognizer to back up to the beginning
of the current word of the diary entry, after finishing the match. Even
if you use &lt;code class="docutils literal"&gt;backup&lt;/code&gt;, the date pattern must absolutely not match more
than a portion of the first word of the diary entry. For example, the
default value of &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-european-date-forms&lt;/span&gt;&lt;/code&gt; is:&lt;/p&gt;
&lt;pre class="literal-block"&gt;((day "/" month "[^/0-9]")
 (day "/" month "/" year "[^0-9]")
 (backup day " *" monthname "\\W+\\&amp;lt;\\([^*0-9]\\|\\([0-9]+[:aApP]\\)\\)")
 (day " *" monthname " *" year "[^0-9]")
 (dayname "\\W"))&lt;/pre&gt;
&lt;p&gt;Notice the use of &lt;code class="docutils literal"&gt;backup&lt;/code&gt; in the third pattern, because it needs to
match part of a word beyond the date itself to distinguish it from the
fourth pattern.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="diary-entries-using-non-gregorian-calendars"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id41"&gt;31.13.7 Diary Entries Using non-Gregorian Calendars&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;As well as entries based on the standard Gregorian calendar, your diary
can have entries based on Bahá'í, Chinese, Hebrew, or Islamic dates.
Recognition of such entries can be time-consuming, however, and since
most people don't use them, you must explicitly enable their use. If you
want the diary to recognize Hebrew-date diary entries, for example, you
must do this:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(add-hook 'diary-nongregorian-listing-hook 'diary-hebrew-list-entries)
(add-hook 'diary-nongregorian-marking-hook 'diary-hebrew-mark-entries)&lt;/pre&gt;
&lt;p&gt;Similarly, for Islamic, Bahá'í and Chinese entries, add
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-islamic-list-entries&lt;/span&gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-islamic-mark-entries&lt;/span&gt;&lt;/code&gt;,
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-bahai-list-entries&lt;/span&gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-bahai-mark-entries&lt;/span&gt;&lt;/code&gt;, or
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-chinese-list-entries&lt;/span&gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-chinese-mark-entries&lt;/span&gt;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;These diary entries have the same formats as Gregorian-date diary
entries; except that &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-bahai-entry-symbol&lt;/span&gt;&lt;/code&gt; (default 'B') must
precede a Bahá'í date, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-chinese-entry-symbol&lt;/span&gt;&lt;/code&gt; (default 'C') a
Chinese date, &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-hebrew-entry-symbol&lt;/span&gt;&lt;/code&gt; (default 'H') a Hebrew date,
and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-islamic-entry-symbol&lt;/span&gt;&lt;/code&gt; (default 'I') an Islamic date.
Moreover, non-Gregorian month names may not be abbreviated (because the
first three letters are often not unique). (Note also that you must use
"Adar I" if you want Adar of a common Hebrew year.) For example, a diary
entry for the Hebrew date Heshvan 25 could look like this:&lt;/p&gt;
&lt;pre class="literal-block"&gt;HHeshvan 25 Happy Hebrew birthday!&lt;/pre&gt;
&lt;p&gt;and would appear in the diary for any date that corresponds to Heshvan
25 on the Hebrew calendar. And here is an Islamic-date diary entry that
matches Dhu al-Qada 25:&lt;/p&gt;
&lt;pre class="literal-block"&gt;IDhu al-Qada 25 Happy Islamic birthday!&lt;/pre&gt;
&lt;p&gt;As with Gregorian-date diary entries, non-Gregorian entries are
nonmarking if preceded by &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-nonmarking-symbol&lt;/span&gt;&lt;/code&gt; (default '&amp;amp;').&lt;/p&gt;
&lt;p&gt;Here is a table of commands used in the calendar to create diary entries
that match the selected date and other dates that are similar in the
Bahá'í, Chinese, Hebrew, or Islamic calendars:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;i h d&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-hebrew-insert-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i h m&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-hebrew-insert-monthly-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i h y&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-hebrew-insert-yearly-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i i d&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-islamic-insert-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i i m&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-islamic-insert-monthly-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i i y&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-islamic-insert-yearly-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i B d&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-bahai-insert-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i B m&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-bahai-insert-monthly-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i B y&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-bahai-insert-yearly-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i C d&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-chinese-insert-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i C m&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-chinese-insert-monthly-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i C y&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-chinese-insert-yearly-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;i C a&lt;/p&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-chinese-insert-anniversary-entry&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;These commands work much like the corresponding commands for ordinary
diary entries: they apply to the date that point is on in the
calendar window, and what they do is insert just the date portion of
a diary entry at the end of your diary file. You must then insert the
rest of the diary entry. The basic commands add an entry for the
specific non-Gregorian date, the 'monthly' commands for the given
non-Gregorian day-within-month in every month, and the 'yearly'
commands for the given non-Gregorian day and month in every year.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Next: &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Fancy-Diary-Display"&gt;Fancy Diary
Display&lt;/a&gt;,
Previous: &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Non_002dGregorian-Diary"&gt;Non-Gregorian
Diary&lt;/a&gt;,
Up: &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Advanced-Calendar_002fDiary-Usage"&gt;Advanced Calendar/Diary
Usage&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="diary-display"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id42"&gt;31.13.8 Diary Display&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Diary display works by preparing the list of diary entries and then
running the function specified by the variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-display-function&lt;/span&gt;&lt;/code&gt;. The default value &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-fancy-display&lt;/span&gt;&lt;/code&gt;
displays diary entries and holidays by copying them into a special
buffer that exists only for the sake of display. Copying diary entries
to a separate buffer provides an opportunity to change the displayed
text to make it prettier—for example, to sort the entries by the dates
they apply to.&lt;/p&gt;
&lt;p&gt;Ordinarily, the fancy diary buffer does not show days for which there
are no diary entries, even if that day is a holiday. If you want such
days to be shown in the fancy diary buffer, set the variable
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-list-include-blanks&lt;/span&gt;&lt;/code&gt; to &lt;code class="docutils literal"&gt;t&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The fancy diary buffer enables View mode (see &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#View-Mode"&gt;View
Mode&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;The alternative display method &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-simple-display&lt;/span&gt;&lt;/code&gt; shows the actual
diary buffer, and uses invisible text to hide entries that don't apply.
Holidays are shown in the mode line. The advantage of this method is
that you can edit the buffer and save your changes directly to the diary
file. This method is not as flexible as the fancy method, however. For
example, it cannot sort entries. Another disadvantage is that invisible
text can be confusing. For example, if you copy a region of text in
order to paste it elsewhere, invisible text may be included. Similarly,
since the diary buffer as you see it is an illusion, simply printing the
buffer may not print what you see on your screen.&lt;/p&gt;
&lt;p&gt;For this reason, there is a special command to print hard copy of the
diary buffer &lt;em&gt;as it appears&lt;/em&gt;; this command is M-x diary-print-entries.
It works with either display method, although with the fancy display you
can also print the buffer like any other. To print a hard copy of a
day-by-day diary for a week, position point on the first day of the
week, type 7 d, and then do M-x diary-print-entries. As usual, the
inclusion of the holidays slows down the display slightly; you can speed
things up by setting the variable &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-show-holidays-flag&lt;/span&gt;&lt;/code&gt; to
&lt;code class="docutils literal"&gt;nil&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This command prepares a temporary buffer that contains only the diary
entries currently visible in the diary buffer. Unlike with the simple
display, the other irrelevant entries are really absent, not just
hidden. After preparing the buffer, it runs the hook
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-print-entries-hook&lt;/span&gt;&lt;/code&gt;. The default value of this hook sends the
data directly to the printer with the command &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;lpr-buffer&lt;/span&gt;&lt;/code&gt; (see
&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Printing"&gt;Printing&lt;/a&gt;).
If you want to use a different command to do the printing, just change
the value of this hook. Other uses might include, for example,
rearranging the lines into order by day and time.&lt;/p&gt;
&lt;p&gt;You can edit the diary entries as they appear in the simple diary
window, but it is important to remember that the buffer displayed
contains the &lt;em&gt;entire&lt;/em&gt; diary file, with portions of it concealed from
view. This means, for instance, that the C-f (&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;forward-char&lt;/span&gt;&lt;/code&gt;) command
can put point at what appears to be the end of the line, but what is in
reality the middle of some concealed line.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Be careful when editing the diary entries in the simple display!&lt;/em&gt;
Inserting additional lines or adding/deleting characters in the middle
of a visible line cannot cause problems, but editing at the end of a
line may not do what you expect. Deleting a line may delete other
invisible entries that follow it. Before editing the simple diary
buffer, it is best to display the entire file with s
(&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-show-all-entries&lt;/span&gt;&lt;/code&gt;).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="fancy-diary-display"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id43"&gt;31.13.9 Fancy Diary Display&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;The following features only work with the fancy diary display.&lt;/p&gt;
&lt;p&gt;You can use the normal hook &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-list-entries-hook&lt;/span&gt;&lt;/code&gt; to sort each
day's diary entries by their time of day. Here's how:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(add-hook 'diary-list-entries-hook 'diary-sort-entries t)&lt;/pre&gt;
&lt;p&gt;For each day, this sorts diary entries that begin with a recognizable
time of day according to their times. Diary entries without times come
first within each day. Note how the sort command is placed at the end of
the hook list, in case earlier members of the list change the order of
the diary entries, or add items.&lt;/p&gt;
&lt;p&gt;You can write 'comments' in diary entries, by setting the variables
&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-comment-start&lt;/span&gt;&lt;/code&gt; and &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-comment-end&lt;/span&gt;&lt;/code&gt; to strings that
delimit comments. The fancy display does not print comments. You might
want to put meta-data for the use of other packages (e.g., the
appointment package, see
&lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Appointments"&gt;Appointments&lt;/a&gt;)
inside comments.&lt;/p&gt;
&lt;p&gt;Your main diary file can include other files. This permits a group of
people to share a diary file for events that apply to all of them. Lines
in the diary file starting with &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-include-string&lt;/span&gt;&lt;/code&gt;:&lt;/p&gt;
&lt;pre class="literal-block"&gt;#include "filename"&lt;/pre&gt;
&lt;p&gt;include the diary entries from the file filename in the fancy diary
buffer. The include mechanism is recursive, so that included files can
include other files, and so on (you must be careful not to have a cycle
of inclusions, of course). Here is how to enable the include facility:&lt;/p&gt;
&lt;pre class="literal-block"&gt;(add-hook 'diary-list-entries-hook 'diary-include-other-diary-files)
(add-hook 'diary-mark-entries-hook 'diary-mark-included-diary-files)&lt;/pre&gt;
&lt;p&gt;The include mechanism works only with the fancy diary display, because
simple diary display shows the entries directly from your diary file.&lt;/p&gt;
&lt;p&gt;Previous: &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Fancy-Diary-Display"&gt;Fancy Diary
Display&lt;/a&gt;,
Up: &lt;a class="reference external" href="https://www.gnu.org/software/emacs/manual/html_mono/emacs.html#Advanced-Calendar_002fDiary-Usage"&gt;Advanced Calendar/Diary
Usage&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="sexp-entries-and-the-fancy-diary-display"&gt;
&lt;h2&gt;&lt;a class="toc-backref" href="https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/#id44"&gt;31.13.10 Sexp Entries and the Fancy Diary Display&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;Sexp diary entries allow you to do more than just have complicated
conditions under which a diary entry applies. Sexp entries should be
preceded by &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-sexp-entry-symbol&lt;/span&gt;&lt;/code&gt; (default '%%') in the diary
file. With the fancy diary display, sexp entries can generate the text
of the entry depending on the date itself.&lt;/p&gt;
&lt;p&gt;For example, an anniversary diary entry can insert the number of years
since the anniversary date into the text of the diary entry. Thus the
'%d' in this diary entry:&lt;/p&gt;
&lt;pre class="literal-block"&gt;%%(diary-anniversary 10 31 1948) Arthur's birthday (%d years old)&lt;/pre&gt;
&lt;p&gt;gets replaced by the age, so on October 31, 1990 the entry appears in
the fancy diary buffer like this:&lt;/p&gt;
&lt;pre class="literal-block"&gt;Arthur's birthday (42 years old)&lt;/pre&gt;
&lt;p&gt;If the diary file instead contains this entry:&lt;/p&gt;
&lt;pre class="literal-block"&gt;%%(diary-anniversary 10 31 1948) Arthur's %d%s birthday&lt;/pre&gt;
&lt;p&gt;the entry in the fancy diary buffer for October 31, 1990 appears like
this:&lt;/p&gt;
&lt;pre class="literal-block"&gt;Arthur's 42nd birthday&lt;/pre&gt;
&lt;p&gt;Similarly, cyclic diary entries can interpolate the number of
repetitions that have occurred:&lt;/p&gt;
&lt;pre class="literal-block"&gt;%%(diary-cyclic 50 1 1 2012) Renew medication (%d%s time)&lt;/pre&gt;
&lt;p&gt;looks like this:&lt;/p&gt;
&lt;pre class="literal-block"&gt;Renew medication (5th time)&lt;/pre&gt;
&lt;p&gt;in the fancy diary display on September 7, 2012.&lt;/p&gt;
&lt;p&gt;There is an early-reminder diary sexp that includes its entry in the
diary not only on the date of occurrence, but also on earlier dates. For
example, if you want a reminder a week before your anniversary, you can
use&lt;/p&gt;
&lt;pre class="literal-block"&gt;%%(diary-remind '(diary-anniversary 12 22 1968) 7) Ed's anniversary&lt;/pre&gt;
&lt;p&gt;and the fancy diary will show 'Ed's anniversary' both on December 15 and
on December 22.&lt;/p&gt;
&lt;p&gt;The function &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-date&lt;/span&gt;&lt;/code&gt; applies to dates described by a month, day,
year combination, each of which can be an integer, a list of integers,
or &lt;code class="docutils literal"&gt;t&lt;/code&gt; (meaning all values). For example,&lt;/p&gt;
&lt;pre class="literal-block"&gt;%%(diary-date '(10 11 12) 22 t) Rake leaves&lt;/pre&gt;
&lt;p&gt;causes the fancy diary to show&lt;/p&gt;
&lt;pre class="literal-block"&gt;Rake leaves&lt;/pre&gt;
&lt;p&gt;on October 22, November 22, and December 22 of every year.&lt;/p&gt;
&lt;p&gt;The function &lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;diary-float&lt;/span&gt;&lt;/code&gt; allows you to describe diary entries that
apply to dates like the third Friday of November, or the last Tuesday in
April. The parameters are the month, dayname, and an index n. The entry
appears on the nth dayname after the first day of month, where dayname=0
means Sunday, 1 means Monday, and so on. If n is negative it counts
backward from the end of month. The value of month can be a list of
months, a single month, or &lt;code class="docutils literal"&gt;t&lt;/code&gt; to specify all months. You can also use
an optional parameter day to specify the nth dayname on or after/before
day of month; the value of day defaults to 1 if n is positive and to the
last day of month if n is negative. For example,&lt;/p&gt;
&lt;pre class="literal-block"&gt;%%(diary-float t 1 -1) Pay rent&lt;/pre&gt;
&lt;p&gt;causes the fancy diary to show&lt;/p&gt;
&lt;pre class="literal-block"&gt;Pay rent&lt;/pre&gt;
&lt;p&gt;on the last Monday of every month.&lt;/p&gt;
&lt;p&gt;The generality of sexp diary entries lets you specify any diary entry
that you can describe algorithmically. A sexp diary entry contains an
expression that computes whether the entry applies to any given date. If
its value is non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt;, the entry applies to that date; otherwise,
it does not. The expression can use the variable &lt;code class="docutils literal"&gt;date&lt;/code&gt; to find the
date being considered; its value is a list (month day year) that refers
to the Gregorian calendar.&lt;/p&gt;
&lt;p&gt;The sexp diary entry applies to a date when the expression's value is
non-&lt;code class="docutils literal"&gt;nil&lt;/code&gt;, but some values have more specific meanings. If the value
is a string, that string is a description of the event which occurs on
that date. The value can also have the form &lt;code class="docutils literal"&gt;(=mark&lt;/code&gt;.=string=)=; then
mark specifies how to mark the date in the calendar, and string is the
description of the event. If mark is a single-character string, that
character appears next to the date in the calendar. If mark is a face
name, the date is displayed in that face. If mark is &lt;code class="docutils literal"&gt;nil&lt;/code&gt;, that
specifies no particular highlighting for the date.&lt;/p&gt;
&lt;p&gt;Suppose you get paid on the 21st of the month if it is a weekday, and on
the Friday before if the 21st is on a weekend. Here is how to write a
sexp diary entry that matches those dates:&lt;/p&gt;
&lt;pre class="literal-block"&gt;&amp;amp;%%(let ((dayname (calendar-day-of-week date))
         (day (cadr date)))
      (or (and (= day 21) (memq dayname '(1 2 3 4 5)))
          (and (memq day '(19 20)) (= dayname 5)))
         ) Pay check deposited&lt;/pre&gt;
&lt;p&gt;The following sexp diary entries take advantage of the ability (in the
fancy diary display) to concoct diary entries whose text varies based on
the date:&lt;/p&gt;
&lt;p&gt;​&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-sunrise-sunset)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry for today's local times of sunrise and sunset.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-lunar-phases)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry for the phases (quarters) of the moon.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-day-of-year)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's day number in the current year and
the number of days remaining in the current year.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-iso-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent ISO commercial date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-julian-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent Julian calendar date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-astro-day-number)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent astronomical (Julian) day
number.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-bahai-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent Bahá'í calendar date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-chinese-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent Chinese calendar date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-coptic-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent Coptic calendar date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-ethiopic-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent Ethiopic calendar date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-french-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent date on the French
Revolutionary calendar.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-hebrew-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent Hebrew calendar date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-islamic-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent Islamic calendar date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-mayan-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent Mayan calendar date.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-persian-date)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry with today's equivalent Persian calendar date.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For example, including the diary entry&lt;/p&gt;
&lt;pre class="literal-block"&gt;&amp;amp;%%(diary-hebrew-date)&lt;/pre&gt;
&lt;p&gt;causes every day's diary display to contain the equivalent date on the
Hebrew calendar, if you are using the fancy diary display. (With simple
diary display, the literal line '&amp;amp;%%(diary-hebrew-date)' appears in the
diary for any date.)&lt;/p&gt;
&lt;p&gt;This function has been used to construct certain standard Hebrew sexp
diary entries:&lt;/p&gt;
&lt;p&gt;​&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-hebrew-rosh-hodesh)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry that tells the occurrence and ritual announcement
of each new Hebrew month.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-hebrew-parasha)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a Saturday diary entry that tells the weekly synagogue scripture
reading.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-hebrew-sabbath-candles)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a Friday diary entry that tells the &lt;em&gt;local time&lt;/em&gt; of Sabbath
candle lighting.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-hebrew-omer)&lt;/span&gt;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Make a diary entry that gives the omer count, when appropriate.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-hebrew-yahrzeit=month&lt;/span&gt; day year&lt;/code&gt;)=name&lt;/p&gt;
&lt;p&gt;Make a diary entry marking the anniversary of a date of death. The
date is the &lt;em&gt;Gregorian&lt;/em&gt; (civil) date of death. The diary entry
appears on the proper Hebrew calendar anniversary and on the day
before. (The order of the parameters changes according to the
calendar date style; for example in the European style to day, month,
year.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;&lt;span class="pre"&gt;%%(diary-hebrew-birthday=month&lt;/span&gt; day year&lt;/code&gt;)=&lt;/p&gt;
&lt;p&gt;Make a diary entry for a birthday on the Hebrew calendar.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All the functions documented above take an optional argument mark which
specifies how to mark the date in the calendar display. If one of these
functions decides that it applies to a certain date, it returns a value
that contains mark, as described above.&lt;/p&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>emacs</category><category>time</category><category>评注笔记</category><guid>https://alinbxsorcerer.github.io/posts/emacs-manual-calendar-and-the-diary/</guid><pubDate>Thu, 16 May 2019 01:53:29 GMT</pubDate></item><item><title>评注:SQL in 10 Minutes 总结</title><link>https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/</link><dc:creator>David</dc:creator><description>&lt;div&gt;&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;This book was born out of necessity.&lt;/p&gt;
&lt;p&gt;I had been teaching Web application development for several years, and students were constantly asking for SQL book recommendations. There are lots of SQL books out there. Some are actually very good. But they all have one thing in common: for most users they teach just too much information. Instead of teaching SQL itself, most books teach everything from database design and normalization to relational database theory and administrative concerns. And while those are all important topics, they are not of interest to most of us who just need to learn SQL. And so, not finding a single book that I felt comfortable recommending, I turned that classroom experience into the book you are holding. Sams Teach Yourself SQL in 10 Minutes will teach you SQL you need to know, starting with simple data retrieval and working on to more complex topics including the use of joins, subqueries, stored procedures, cursors, ??triggers, and table constraints. You’ll learn methodically, systematically, and simply—in lessons that will each take 10 minutes or less to complete. Now in its fourth edition, this book has taught SQL to over a quarter million English speaking users, and has been translated into over a dozen other languages too so as to help users the globe over. And now it is your turn. So turn to Lesson 1, and get to work. You’ll be writing world class SQL in no time at all.&lt;/p&gt;
&lt;div class="section" id="dbmss-covered-in-this-book"&gt;
&lt;h3&gt;DBMSs Covered in This Book&lt;/h3&gt;
&lt;p&gt;For the most part, the SQL taught in this book will apply to any Database Management System (DBMS). However, as all SQL implementations are not created equal,&lt;/p&gt;
&lt;p&gt;the following DBMSs are explicitly covered (and specific instructions or notes are included where needed): • Apache Open Office Base • IBM DB2 • Microsoft Access • Microsoft SQL Server (including Microsoft SQL Server Express) • MariaDB • MySQL • Oracle (including Oracle Express) • PostgreSQL • SQLite Example databases (or SQL scripts to create the example databases) are available for all of these DBMSs on the book webpage at &lt;a class="reference external" href="http://forta.com/books/0672336073/"&gt;http://forta.com/books/0672336073/&lt;/a&gt; Errors: &lt;a class="reference external" href="https://forta.com/books/0672336073/errata/"&gt;https://forta.com/books/0672336073/errata/&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="understanding-sql"&gt;
&lt;h2&gt;1 Understanding SQL&lt;/h2&gt;
&lt;p&gt;总结 database, table, column, row, primary key&lt;/p&gt;
&lt;div class="section" id="databases"&gt;
&lt;h3&gt;Databases&lt;/h3&gt;
&lt;p&gt;The term database is used in many different ways, but for our purposes (and indeed, from SQL’s perspective) a database is a collection of data stored in some organized fashion. The simplest way to think of it is to imagine a database as a filing cabinet. The filing cabinet is simply a physical location to store data, regardless of what that data is or how it is organized.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Database&lt;/p&gt;
&lt;p&gt;A container (usually a file or set of files) to store organized data.&lt;/p&gt;
&lt;p&gt;Caution: Misuse Causes Confusion&lt;/p&gt;
&lt;p&gt;People often use the term database to refer to the database software they are running. This is incorrect, and it is a source of much confusion. Database software is actually called the Database Management System (or DBMS). The database is the container created and manipulated via the DBMS, and exactly what the database is and what form it takes varies from one database to the next.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="tables"&gt;
&lt;h3&gt;Tables&lt;/h3&gt;
&lt;p&gt;When you store information in your filing cabinet, you don’t just {phase:toss it in a drawer}. Rather, you create files within the filing cabinet, and then you file related data in specific files.&lt;/p&gt;
&lt;p&gt;In the database world, that file is called a table. A table is a structured file that can store data of a specific type. A table might contain a list of customers, a product catalog, or any other list of information.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Table is a file A structured list of data of a specific type.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The key here is that the data stored in the table is one type of data or one list. You would never store a list of customers and a list of orders in the same database table. Doing so would make subsequent retrieval and access difficult. Rather, you’d create two tables, one for each list.&lt;/p&gt;
&lt;p&gt;Every table in a database has a name that identifies it. That name is always unique— meaning no other table in that database can have the same name.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Note: Table Names&lt;/p&gt;
&lt;p&gt;What makes a table name unique is actually a combination of several things including the database name and table name. Some databases also use the name of the database owner as part of the unique name. This means that while you cannot use the same table name twice in the same database, you definitely can reuse table names in different databases.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Tables have characteristics and properties that define how data is stored in them. These include information about what data may be stored, how it is broken up, how individual pieces of information are named, and much more. This set of information that describes a table is known as a schema, and schemas are used to describe specific tables within a database, as well as entire databases (and the relationship between tables in them, if any).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Schema&lt;/p&gt;
&lt;p&gt;Information about database and table layout and properties.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="columns-and-datatypes-field"&gt;
&lt;h3&gt;Columns and Datatypes Field&lt;/h3&gt;
&lt;p&gt;Tables are made up of columns. A column contains a particular piece of information within a table.&lt;/p&gt;
&lt;p&gt;Column A single field in a table. All tables are made up of one or more columns.&lt;/p&gt;
&lt;p&gt;The best way to understand this is to envision database tables as grids, somewhat like spreadsheets. Each column in the grid contains a particular piece of information. In a customer table, for example, one column contains the customer number, another contains the customer name, and the address, city, state, and ZIP code are all stored in their own columns.&lt;/p&gt;
&lt;p&gt;Tip: Breaking Up Data It is extremely important to break data into multiple columns correctly. For example, city, state, and ZIP code should always be separate columns. By breaking these out, it becomes possible to sort or filter data by specific columns (for example, to find all customers in a particular state or in a particular city). If city and state are combined into one column, it would be extremely difficult to sort or filter by state.&lt;/p&gt;
&lt;p&gt;When you break up data, the level of granularity is up to you and your specific requirements. For example, addresses are typically stored with the house number and street name together. This is fine, unless you might one day need to sort data by street name, in which case splitting house number and street name would be preferable.&lt;/p&gt;
&lt;p&gt;Each column in a database has an associated datatype. A datatype defines what type of data the column can contain. For example, if the column were to contain a number(perhaps the number of items in an order), the datatype would be a numeric datatype. If the column were to contain dates, text, notes, currency amounts, and so on, the appropriate datatype would be used to specify this.&lt;/p&gt;
&lt;p&gt;Datatype&lt;/p&gt;
&lt;p&gt;A type of allowed data. Every table column has an associated datatype that restricts (or allows) specific data in that column.&lt;/p&gt;
&lt;p&gt;Datatypes restrict the type of data that can be stored in a column (for example, preventing the entry of alphabetical characters into a numeric field). Datatypes also help sort data correctly and play an important role in optimizing disk usage. As such, special attention must be given to picking the right datatype when tables are created.&lt;/p&gt;
&lt;p&gt;Caution: Datatype Compatibility&lt;/p&gt;
&lt;p&gt;Datatypes and their names are one of the primary sources of SQL incompatibility. While most basic datatypes are supported consistently, many more advanced datatypes are not. And worse, occasionally you’ll find that the same datatype is referred to by different names in different DBMSs. There is not much you can do about this, but it is important to keep in mind when you create table schemas.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="rows-record"&gt;
&lt;h3&gt;Rows record&lt;/h3&gt;
&lt;p&gt;Data in a table is stored in rows; each record saved is stored in its own row. Again, envisioning a table as a spreadsheet style grid, the vertical columns in the grid are the table columns, and the horizontal rows are the table rows.&lt;/p&gt;
&lt;p&gt;For example, a customers table might store one customer per row. The number of rows in the table is the number of records in it.&lt;/p&gt;
&lt;p&gt;Rows A record in a table. Note: Records or Rows?&lt;/p&gt;
&lt;p&gt;You may hear users refer to database records when referring to rows. For the most part the two terms are used interchangeably, but row is technically the correct term.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="primary-keys"&gt;
&lt;h3&gt;Primary Keys&lt;/h3&gt;
&lt;p&gt;Every row in a table should have some column (or set of columns) that uniquely identifies it. A table containing customers might use a customer number column for this purpose, whereas a table containing orders might use the order ID. An employee list table might use an employee ID or the employee Social Security number column.&lt;/p&gt;
&lt;p&gt;Primary key&lt;/p&gt;
&lt;p&gt;A column (or set of columns) whose values uniquely identify every row in a table.&lt;/p&gt;
&lt;p&gt;This column (or set of columns) that uniquely identifies each row in a table is called a primary key. The primary key is used to refer to a specific row. Without a primary key, updating or deleting specific rows in a table becomes extremely difficult as there is no guaranteed safe way to refer to just the rows to be affected.&lt;/p&gt;
&lt;p&gt;Tip: Always Define Primary Keys&lt;/p&gt;
&lt;p&gt;Although primary keys are not actually required, most database designers ensure that every table they create has a primary key so that future data manipulation is possible and manageable.&lt;/p&gt;
&lt;p&gt;Any column in a table can be established as the primary key, as long as it meets the following conditions:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;No two rows can have the same primary key value.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Every row must have a primary key value. (Primary key columns may not allow NULL values.)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Values in primary key columns should never be modified or updated.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Primary key values should never be reused. (If a row is deleted from the table, its primary key may not be assigned to any new rows in the future.)&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Primary keys are usually defined on a single column within a table. But this is not required, and multiple columns may be used together as a primary key. When multiple columns are used, the rules listed above must apply to all columns, and the values of all columns together must be unique (individual columns need not have unique values).&lt;/p&gt;
&lt;p&gt;There is another very important type of key called a foreign key, but I’ll get to that later on in Lesson 12, “Joining Tables.”&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="retrieving-data"&gt;
&lt;h2&gt;2 Retrieving Data&lt;/h2&gt;
&lt;p&gt;总结: select, retrieve individual, multiple, all 概念: distinct limit, offset&lt;/p&gt;
&lt;div class="section" id="retrieving-individual-column"&gt;
&lt;h3&gt;Retrieving Individual Column&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_452629943143440aa59f41147b05159d-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="retrieving-multiple-columns"&gt;
&lt;h3&gt;Retrieving Multiple Columns&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_35b66a316c444914b88c713d14197c32-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_35b66a316c444914b88c713d14197c32-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="retrieving-all-columns"&gt;
&lt;h3&gt;Retrieving All Columns&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_b650ad804685459bbb93f31b0783378a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="retrieving-distinct-column"&gt;
&lt;h3&gt;Retrieving Distinct Column&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_ef42a9eb2920413ca7d6ac45a4d15709-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_395fcfbc961543efbceee44cd183e4e5-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;distinct&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="limiting-results"&gt;
&lt;h3&gt;Limiting Results&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_a037974d45304ef69b0aab921fe6e297-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;  &lt;span class="k"&gt;limit&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_590c87b1e0ef4bf885de9f36d30884a2-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;limit&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="k"&gt;offset&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="using-comments"&gt;
&lt;h3&gt;Using Comments&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_0fef8583f04b497d8f4177032e25e922-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="c1"&gt;-- this is a comment FROM Products;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="sorting-retrieved-data"&gt;
&lt;h2&gt;3.Sorting Retrieved Data&lt;/h2&gt;
&lt;p&gt;In this lesson, you will learn how to use the SELECT statement's ORDER BY clause to sort retrieved data as needed.&lt;/p&gt;
&lt;p&gt;关键词 &lt;code class="docutils literal"&gt;order by&lt;/code&gt;, 需要放置到最后 individual columm, multiple columns, column postion, sort direction 接在retrieve之后.&lt;/p&gt;
&lt;div class="section" id="sorting-data"&gt;
&lt;h3&gt;Sorting Data&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_bc2b546486b74f8f9936610a9575da11-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="sorting-by-multiple-columns"&gt;
&lt;h3&gt;Sorting by Multiple Columns&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_4c49d5eda586420983f3a2cac4390147-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;
&lt;a name="rest_code_4c49d5eda586420983f3a2cac4390147-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_4c49d5eda586420983f3a2cac4390147-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="sorting-by-column-position"&gt;
&lt;h3&gt;Sorting by Column Position&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_c4e261a43cc845d7999994f81452b2a3-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="specifying-sort-direction"&gt;
&lt;h3&gt;Specifying Sort Direction&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_ebfbf72392c344ec9975ba12cb705ea6-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;
&lt;a name="rest_code_ebfbf72392c344ec9975ba12cb705ea6-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_ebfbf72392c344ec9975ba12cb705ea6-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="k"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="filtering-data"&gt;
&lt;h2&gt;4.Filtering Data&lt;/h2&gt;
&lt;p&gt;总结, 开始filter filter, where clause, single value; nonmatches, a range(between), null&lt;/p&gt;
&lt;div class="section" id="using-the-where-clause"&gt;
&lt;h3&gt;Using the WHERE Clause&lt;/h3&gt;
&lt;p&gt;select prod&lt;sub&gt;name&lt;/sub&gt;, prod&lt;sub&gt;price&lt;/sub&gt; from Products where prod&lt;sub&gt;price&lt;/sub&gt; &amp;gt; 3.49&lt;/p&gt;
&lt;p&gt;#+end&lt;sub&gt;src&lt;/sub&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-where-clause-operators"&gt;
&lt;h3&gt;The WHERE Clause Operators&lt;/h3&gt;
&lt;div class="figure"&gt;
&lt;img alt="Screen Shot 2018-08-11 at 10.03.13 PM" src="http://heropublic.oss-cn-beijing.aliyuncs.com/140327.png"&gt;
&lt;p class="caption"&gt;Screen Shot 2018-08-11 at 10.03.13 PM&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="checking-against-a-single-value"&gt;
&lt;h4&gt;Checking Against a Single Value&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_0bfcddbc90224d29be356bfdc267eb77-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;
&lt;a name="rest_code_0bfcddbc90224d29be356bfdc267eb77-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_0bfcddbc90224d29be356bfdc267eb77-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="checking-for-nonmatches"&gt;
&lt;h4&gt;Checking for Nonmatches&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_900c6a2aae4543fdacb821cca6e1a863-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="ss"&gt;"DLL01"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="checking-for-a-range-of-values"&gt;
&lt;h4&gt;Checking for a Range of Values&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_4c2bbc8697a74037b5d4381425a1b242-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="k"&gt;between&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;49&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;99&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="checking-for-no-value"&gt;
&lt;h4&gt;Checking for No Value&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_0302910743584286b1ab3a7632d0a9bd-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;
&lt;a name="rest_code_0302910743584286b1ab3a7632d0a9bd-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_0302910743584286b1ab3a7632d0a9bd-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_74c97e0bc1c84722beabc9b81a80ba0f-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;
&lt;a name="rest_code_74c97e0bc1c84722beabc9b81a80ba0f-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_74c97e0bc1c84722beabc9b81a80ba0f-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="advanced-data-filtering"&gt;
&lt;h2&gt;5.Advanced Data Filtering&lt;/h2&gt;
&lt;p&gt;总结: 从关键词combine出发. and, or, () which indicate order of evaluation. use in(memberp), not&lt;/p&gt;
&lt;div class="section" id="combining-where-clauses"&gt;
&lt;h3&gt;Combining WHERE Clauses&lt;/h3&gt;
&lt;div class="section" id="using-the-and-operator"&gt;
&lt;h4&gt;Using the AND Operator&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_b16f20de7dcc42b7af5733b4afb0df42-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;
&lt;a name="rest_code_b16f20de7dcc42b7af5733b4afb0df42-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_b16f20de7dcc42b7af5733b4afb0df42-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"DLL01"&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="using-the-or-operator"&gt;
&lt;h4&gt;Using the OR Operator&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_b6cdaddb2e6b411c978afdc83da09b06-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;
&lt;a name="rest_code_b6cdaddb2e6b411c978afdc83da09b06-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_b6cdaddb2e6b411c978afdc83da09b06-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ss"&gt;"DLL01"&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"BRS01"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="understanding-order-of-evaluation"&gt;
&lt;h4&gt;Understanding Order of Evaluation&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_4cd213d24b9a4e92b597438463ccfc29-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;
&lt;a name="rest_code_4cd213d24b9a4e92b597438463ccfc29-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_4cd213d24b9a4e92b597438463ccfc29-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"DLL01"&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="n"&gt;vend_Id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"BRS01"&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_4a8e4f3c3e61471da3cc14695d523a93-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;
&lt;a name="rest_code_4a8e4f3c3e61471da3cc14695d523a93-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_4a8e4f3c3e61471da3cc14695d523a93-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"DLL01"&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"BRS01"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="using-the-in-operator"&gt;
&lt;h3&gt;Using the IN Operator&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_c19ac7132e3b449e846484626f5c9c08-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"dll01"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="ss"&gt;"brs01"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_b17fb83defde4297aabd3789e4bf03e6-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"DLL01"&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt;
&lt;a name="rest_code_b17fb83defde4297aabd3789e4bf03e6-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"BRS01"&lt;/span&gt; &lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="using-the-not-operator"&gt;
&lt;h3&gt;Using the NOT Operator&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_ba53ceb2b649418684efc296edde1c07-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;
&lt;a name="rest_code_ba53ceb2b649418684efc296edde1c07-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_ba53ceb2b649418684efc296edde1c07-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"DLL01"&lt;/span&gt;
&lt;a name="rest_code_ba53ceb2b649418684efc296edde1c07-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="using-wildcard-filtering"&gt;
&lt;h2&gt;6.Using Wildcard Filtering&lt;/h2&gt;
&lt;p&gt;总结 从wildcard出发,推导出来regex的必要性. %, _, brackets 当然最重要的一点是regex, 日后便只用rlike&lt;/p&gt;
&lt;div class="section" id="id1"&gt;
&lt;span id="using-wildcard-filtering-1"&gt;&lt;/span&gt;&lt;h3&gt;Using Wildcard Filtering&lt;/h3&gt;
&lt;div class="section" id="the-percent-sign-wildcard"&gt;
&lt;h4&gt;The Percent Sign (%) Wildcard&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_18a1f0c78cd6439f931ca25c0570c81b-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;like&lt;/span&gt;  &lt;span class="ss"&gt;"fish%"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_eef5aa35158f4d278afb595fdb45f140-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;
&lt;a name="rest_code_eef5aa35158f4d278afb595fdb45f140-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_eef5aa35158f4d278afb595fdb45f140-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;like&lt;/span&gt; &lt;span class="ss"&gt;"%bean bag%"&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_912d15dadb104844a4614843e0badd1a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;like&lt;/span&gt; &lt;span class="ss"&gt;"f%y"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="the-underscore-wildcard"&gt;
&lt;h4&gt;The Underscore (_) Wildcard&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_70e64683f2124203987eb9e4b649d2c0-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;
&lt;a name="rest_code_70e64683f2124203987eb9e4b649d2c0-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_70e64683f2124203987eb9e4b649d2c0-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;like&lt;/span&gt; &lt;span class="ss"&gt;"__ inch teddy bear"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_37f391c65fa74811a1090b1e2ffd1fab-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_37f391c65fa74811a1090b1e2ffd1fab-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="k"&gt;like&lt;/span&gt;  &lt;span class="ss"&gt;"%inch teddy bear"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="the-brackets-wildcard"&gt;
&lt;h4&gt;The Brackets ([]) Wildcard&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_9cfec5b1864e4eafa7b3e5aa8b8adc3a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt; &lt;span class="n"&gt;rlike&lt;/span&gt;
&lt;a name="rest_code_9cfec5b1864e4eafa7b3e5aa8b8adc3a-2"&gt;&lt;/a&gt;&lt;span class="s1"&gt;'[JM].*'&lt;/span&gt; &lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_22f9071a5097452e8b6188fef64acfe6-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt; &lt;span class="n"&gt;rlike&lt;/span&gt;
&lt;a name="rest_code_22f9071a5097452e8b6188fef64acfe6-2"&gt;&lt;/a&gt;&lt;span class="ss"&gt;"[^JM].*"&lt;/span&gt; &lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="creating-calculated-fields"&gt;
&lt;h2&gt;7.Creating Calculated Fields&lt;/h2&gt;
&lt;p&gt;最有意思的一点便是用select测试functions and calcuations calculated field, concat, alias, true calcualtion(expanded price) contat便是对字符串预处理. 从calculated fields引出来&lt;/p&gt;
&lt;div class="section" id="concatenating-fields"&gt;
&lt;h3&gt;Concatenating Fields&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_648d1f23b4d943a1b6e64372993e8670-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;concat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"("&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;vend_country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;")"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_648d1f23b4d943a1b6e64372993e8670-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;
&lt;a name="rest_code_648d1f23b4d943a1b6e64372993e8670-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;div class="section" id="using-aliases"&gt;
&lt;h4&gt;Using Aliases&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_a2fc41b2c9f6404babf4de5227fc63cd-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;concat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;" ("&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;vend_country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;")"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;vend_title&lt;/span&gt;
&lt;a name="rest_code_a2fc41b2c9f6404babf4de5227fc63cd-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;
&lt;a name="rest_code_a2fc41b2c9f6404babf4de5227fc63cd-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="performing-mathematical-calcualtions"&gt;
&lt;h3&gt;Performing Mathematical Calcualtions&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_cb6b7be0ad8548a1846d9e7f6ed70f92-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;quantity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_cb6b7be0ad8548a1846d9e7f6ed70f92-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;quantity&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;item_price&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;expanded_price&lt;/span&gt;
&lt;a name="rest_code_cb6b7be0ad8548a1846d9e7f6ed70f92-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;
&lt;a name="rest_code_cb6b7be0ad8548a1846d9e7f6ed70f92-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;20008&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Table 7.1. SQL Mathematical Operators&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://heropublic.oss-cn-beijing.aliyuncs.com/024821"&gt;http://heropublic.oss-cn-beijing.aliyuncs.com/024821&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="using-data-manipulation-functions"&gt;
&lt;h2&gt;8.Using Data Manipulation Functions&lt;/h2&gt;
&lt;p&gt;总结 functions中的4点:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;text (soundex) ;;最有意思的一点.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;numeric&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;date and time&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;system infos&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="section" id="understanding-functions"&gt;
&lt;h3&gt;Understanding Functions&lt;/h3&gt;
&lt;div class="section" id="the-problem-with-functions"&gt;
&lt;h4&gt;The Problem with Functions&lt;/h4&gt;
&lt;div class="figure"&gt;
&lt;img alt="Screen Shot 2018-08-12 at 10.59.11 AM" src="http://heropublic.oss-cn-beijing.aliyuncs.com/025926.png"&gt;
&lt;p class="caption"&gt;Screen Shot 2018-08-12 at 10.59.11 AM&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="using-functions"&gt;
&lt;h3&gt;Using Functions&lt;/h3&gt;
&lt;div class="section" id="text-manipulation-functions"&gt;
&lt;h4&gt;Text Manipulation Functions&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_a9c04dfedeff465485f69810ccf84ddb-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;vend_name_upcase&lt;/span&gt;
&lt;a name="rest_code_a9c04dfedeff465485f69810ccf84ddb-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;
&lt;a name="rest_code_a9c04dfedeff465485f69810ccf84ddb-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;&lt;strong&gt;Table 8.2. Commonly Used Text-Manipulation Functions&lt;/strong&gt;&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Screen Shot 2018-08-12 at 11.45.20 AM" src="http://heropublic.oss-cn-beijing.aliyuncs.com/034543.png"&gt;
&lt;p class="caption"&gt;Screen Shot 2018-08-12 at 11.45.20 AM&lt;/p&gt;
&lt;/div&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_01d55181149e40388031bc4f51fe8824-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"Michael Green"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="date-and-time-manipulation-functions"&gt;
&lt;h4&gt;Date and Time Manipulation Functions&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_8d30808f129042af8ea94a66aa578e6e-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;
&lt;a name="rest_code_8d30808f129042af8ea94a66aa578e6e-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;
&lt;a name="rest_code_8d30808f129042af8ea94a66aa578e6e-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="k"&gt;year&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;order_date&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2012&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="numeric-manipulation-functions"&gt;
&lt;h4&gt;Numeric Manipulation Functions&lt;/h4&gt;
&lt;div class="figure"&gt;
&lt;img alt="Screen Shot 2018-08-12 at 11.33.29 AM" src="http://heropublic.oss-cn-beijing.aliyuncs.com/033344.png"&gt;
&lt;p class="caption"&gt;Screen Shot 2018-08-12 at 11.33.29 AM&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="summarizing-data"&gt;
&lt;h2&gt;9.Summarizing Data&lt;/h2&gt;
&lt;p&gt;总结:&lt;/p&gt;
&lt;p&gt;avg, min, max, sum, count, # 首先讲avg放在前面&lt;/p&gt;
&lt;p&gt;与distinct相结合.&lt;/p&gt;
&lt;div class="section" id="using-aggregate-functions"&gt;
&lt;h3&gt;Using Aggregate Functions&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Table 9.1. SQL Aggregate Functions&lt;/strong&gt;&lt;/p&gt;
&lt;div class="figure"&gt;
&lt;img alt="Screen Shot 2018-08-12 at 12.00.30 PM" src="http://heropublic.oss-cn-beijing.aliyuncs.com/040046.png"&gt;
&lt;p class="caption"&gt;Screen Shot 2018-08-12 at 12.00.30 PM&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-avg-function"&gt;
&lt;h4&gt;The AVG() Function&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_2bdb9ed9a4884530bcfcec63fecf8ec4-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;avg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;avg_price&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_8dcd8b625c5f4ca98d779ec64b9ab434-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;sql&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;engine&lt;/span&gt; &lt;span class="n"&gt;mysql&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;dbuser&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="k"&gt;database&lt;/span&gt; &lt;span class="n"&gt;grocer&lt;/span&gt;
&lt;a name="rest_code_8dcd8b625c5f4ca98d779ec64b9ab434-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;avg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;avg_price&lt;/span&gt;
&lt;a name="rest_code_8dcd8b625c5f4ca98d779ec64b9ab434-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_8dcd8b625c5f4ca98d779ec64b9ab434-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"DLL01"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="the-count-function"&gt;
&lt;h4&gt;The COUNT() Function&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_60fce8872950455382f3f8ef6b56a118-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;num_cust&lt;/span&gt;
&lt;a name="rest_code_60fce8872950455382f3f8ef6b56a118-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_cb59f1917315499497a9b54bfb018891-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_email&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;num_cust&lt;/span&gt;
&lt;a name="rest_code_cb59f1917315499497a9b54bfb018891-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="the-max-function"&gt;
&lt;h4&gt;The MAX() Function&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_daaf7cdb1bae4501ae849398743a1eca-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;max_price&lt;/span&gt;
&lt;a name="rest_code_daaf7cdb1bae4501ae849398743a1eca-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="the-min-function"&gt;
&lt;h4&gt;The MIN() Function&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_b1f01e14dd864c448c1573540734f1a4-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;min_price&lt;/span&gt;
&lt;a name="rest_code_b1f01e14dd864c448c1573540734f1a4-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="the-sum"&gt;
&lt;h4&gt;The SUM()&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_edba028e906b43a4ae6a2e08345480ff-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;quantity&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;items_ordered&lt;/span&gt;
&lt;a name="rest_code_edba028e906b43a4ae6a2e08345480ff-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;
&lt;a name="rest_code_edba028e906b43a4ae6a2e08345480ff-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;20005&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_c69796e1db0645c3b428e177762eaab7-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item_price&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;quantity&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;total_price&lt;/span&gt;
&lt;a name="rest_code_c69796e1db0645c3b428e177762eaab7-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;
&lt;a name="rest_code_c69796e1db0645c3b428e177762eaab7-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;20005&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="aggregates-on-distinct-values"&gt;
&lt;h3&gt;Aggregates on Distinct Values&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_e31b2742594b4425ab764c88161d815d-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;avg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;distinct&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;avg_price&lt;/span&gt;
&lt;a name="rest_code_e31b2742594b4425ab764c88161d815d-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_e31b2742594b4425ab764c88161d815d-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"DLL01"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="combining-aggregate-functions"&gt;
&lt;h3&gt;Combining Aggregate Functions&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_16fabd64080948b48733dd43bd2d56f5-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;num_items&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_16fabd64080948b48733dd43bd2d56f5-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;min_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_16fabd64080948b48733dd43bd2d56f5-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;max_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_16fabd64080948b48733dd43bd2d56f5-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;avg&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;avg_price&lt;/span&gt;
&lt;a name="rest_code_16fabd64080948b48733dd43bd2d56f5-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="grouping-data"&gt;
&lt;h2&gt;10.Grouping Data&lt;/h2&gt;
&lt;p&gt;总结, group by之后, 可以应用aggregate calculation 针对单一的column, filter, group and sort 棒, 总结当下所学. select, from, where, group by, having, order by&lt;/p&gt;
&lt;div class="section" id="creating-groups"&gt;
&lt;h3&gt;Creating Groups&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_f38c79ba8caf4b549108b8de1eaa4395-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;num_prods&lt;/span&gt;
&lt;a name="rest_code_f38c79ba8caf4b549108b8de1eaa4395-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_f38c79ba8caf4b549108b8de1eaa4395-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;group&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="filtering-groups"&gt;
&lt;h3&gt;Filtering Groups&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_1b1eec21b32d47e892febff83f170e3d-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;a name="rest_code_1b1eec21b32d47e892febff83f170e3d-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;
&lt;a name="rest_code_1b1eec21b32d47e892febff83f170e3d-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;group&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;
&lt;a name="rest_code_1b1eec21b32d47e892febff83f170e3d-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;having&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_d5d2f3309a474fa9a03ad714b69f5270-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;num_prods&lt;/span&gt;
&lt;a name="rest_code_d5d2f3309a474fa9a03ad714b69f5270-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_d5d2f3309a474fa9a03ad714b69f5270-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
&lt;a name="rest_code_d5d2f3309a474fa9a03ad714b69f5270-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;group&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;
&lt;a name="rest_code_d5d2f3309a474fa9a03ad714b69f5270-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;having&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_bc0a9199ae544912adbba261afeb3e54-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;num_prods&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt; &lt;span class="k"&gt;group&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="k"&gt;having&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="grouping-and-sorting"&gt;
&lt;h3&gt;Grouping and Sorting&lt;/h3&gt;
&lt;div class="figure"&gt;
&lt;img alt="Screen Shot 2018-08-12 at 3.07.00 PM" src="http://heropublic.oss-cn-beijing.aliyuncs.com/070716.png"&gt;
&lt;p class="caption"&gt;Screen Shot 2018-08-12 at 3.07.00 PM&lt;/p&gt;
&lt;/div&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_490a7aa0267940dca500e0128dd8c297-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;
&lt;a name="rest_code_490a7aa0267940dca500e0128dd8c297-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;
&lt;a name="rest_code_490a7aa0267940dca500e0128dd8c297-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;group&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt;
&lt;a name="rest_code_490a7aa0267940dca500e0128dd8c297-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;having&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;a name="rest_code_490a7aa0267940dca500e0128dd8c297-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="k"&gt;desc&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_ee363c93223f48d9b293e8ccca54df4a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt; &lt;span class="k"&gt;group&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="k"&gt;having&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="working-with-subqueries"&gt;
&lt;h2&gt;11.Working with Subqueries&lt;/h2&gt;
&lt;p&gt;总结归纳 subqueries, filter by subqueries(用in), calculated fields&lt;/p&gt;
&lt;div class="section" id="filtering-by-subquery"&gt;
&lt;h3&gt;Filtering by Subquery&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_6940680529114c5a831437c1016110ec-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;
&lt;a name="rest_code_6940680529114c5a831437c1016110ec-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"rgan01"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_3318237f2e7249d29a3eb5a4d4d85574-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="k"&gt;IN&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20007&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;20008&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_f2e5ccab750d48c8aa660473d82272c6-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;
&lt;a name="rest_code_f2e5ccab750d48c8aa660473d82272c6-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_f2e5ccab750d48c8aa660473d82272c6-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"1000000004"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"1000000005"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_cfbddc3a61f84a6792ed9ea9e1638699-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_cfbddc3a61f84a6792ed9ea9e1638699-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;
&lt;a name="rest_code_cfbddc3a61f84a6792ed9ea9e1638699-3"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"rgan01"&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="using-subqueries-as-calculated-fields"&gt;
&lt;h3&gt;Using Subqueries as Calculated Fields&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_f307679027ac45909299b6f2c74b2170-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt; &lt;span class="k"&gt;group&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_4c2dd5dd81ae47deab4dc1b65015eac5-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_4c2dd5dd81ae47deab4dc1b65015eac5-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;a name="rest_code_4c2dd5dd81ae47deab4dc1b65015eac5-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_4c2dd5dd81ae47deab4dc1b65015eac5-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_6088ec6c76aa45a59fb0115fdfe902c0-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_6088ec6c76aa45a59fb0115fdfe902c0-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;
&lt;a name="rest_code_6088ec6c76aa45a59fb0115fdfe902c0-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_6088ec6c76aa45a59fb0115fdfe902c0-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="joining-tables"&gt;
&lt;h2&gt;12.Joining Tables&lt;/h2&gt;
&lt;p&gt;解决subquery的问题而引入join 先join再查询, break down然后再join回去. inner join, where, multiple tables&lt;/p&gt;
&lt;div class="section" id="creating-a-join"&gt;
&lt;h3&gt;Creating a Join&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_6b549767d93b4da58f67986fb98b464f-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;
&lt;a name="rest_code_6b549767d93b4da58f67986fb98b464f-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_6b549767d93b4da58f67986fb98b464f-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;div class="section" id="the-importance-of-the-where-clause"&gt;
&lt;h4&gt;The Importance of the WHERE Clause&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_b91ddefa9199432caaa46b55aca99d14-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;
&lt;a name="rest_code_b91ddefa9199432caaa46b55aca99d14-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="inner-joins"&gt;
&lt;h4&gt;Inner Joins&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_89072f8006a64f36aef15f9cb1457f3c-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;
&lt;a name="rest_code_89072f8006a64f36aef15f9cb1457f3c-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt; &lt;span class="k"&gt;inner&lt;/span&gt; &lt;span class="k"&gt;join&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;
&lt;a name="rest_code_89072f8006a64f36aef15f9cb1457f3c-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_89072f8006a64f36aef15f9cb1457f3c-4"&gt;&lt;/a&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="n"&gt;comfortable&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;this&lt;/span&gt; &lt;span class="n"&gt;solution&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="joining-multiple-tables"&gt;
&lt;h4&gt;Joining Multiple Tables&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_c2509a28777f4a7b9dc9b640d071ebb0-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;quantity&lt;/span&gt;
&lt;a name="rest_code_c2509a28777f4a7b9dc9b640d071ebb0-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;
&lt;a name="rest_code_c2509a28777f4a7b9dc9b640d071ebb0-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt;
&lt;a name="rest_code_c2509a28777f4a7b9dc9b640d071ebb0-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Products&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;prod_id&lt;/span&gt;
&lt;a name="rest_code_c2509a28777f4a7b9dc9b640d071ebb0-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;20007&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_fbe51b1d526740c19aa24d0f343ce750-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;
&lt;a name="rest_code_fbe51b1d526740c19aa24d0f343ce750-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_fbe51b1d526740c19aa24d0f343ce750-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="k"&gt;IN&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;
&lt;a name="rest_code_fbe51b1d526740c19aa24d0f343ce750-4"&gt;&lt;/a&gt;                  &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;
&lt;a name="rest_code_fbe51b1d526740c19aa24d0f343ce750-5"&gt;&lt;/a&gt;                  &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="k"&gt;IN&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt;
&lt;a name="rest_code_fbe51b1d526740c19aa24d0f343ce750-6"&gt;&lt;/a&gt;                                      &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;
&lt;a name="rest_code_fbe51b1d526740c19aa24d0f343ce750-7"&gt;&lt;/a&gt;                                      &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'RGAN01'&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;a name="rest_code_fbe51b1d526740c19aa24d0f343ce750-8"&gt;&lt;/a&gt;&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="err"&gt;这用于思考的过程&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_ad9eb8d2945646319e6d59d254fe9fbc-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;
&lt;a name="rest_code_ad9eb8d2945646319e6d59d254fe9fbc-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;
&lt;a name="rest_code_ad9eb8d2945646319e6d59d254fe9fbc-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;
&lt;a name="rest_code_ad9eb8d2945646319e6d59d254fe9fbc-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;orderitems&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;
&lt;a name="rest_code_ad9eb8d2945646319e6d59d254fe9fbc-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'rgan01'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="creating-advanced-joins"&gt;
&lt;h2&gt;13.Creating Advanced Joins&lt;/h2&gt;
&lt;p&gt;总结 table alias outer join, join便是对接的部分. (inner join忽略null) 在join中使用aggregate&lt;/p&gt;
&lt;div class="section" id="using-table-aliases"&gt;
&lt;h3&gt;Using Table Aliases&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_dec5a37a0d5446798fa9367530cd0a75-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;concat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;" ("&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;vend_country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;") "&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_dec5a37a0d5446798fa9367530cd0a75-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;vend_title&lt;/span&gt;
&lt;a name="rest_code_dec5a37a0d5446798fa9367530cd0a75-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;
&lt;a name="rest_code_dec5a37a0d5446798fa9367530cd0a75-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_fdccb130b6114aa4b23c49ef8794b730-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;
&lt;a name="rest_code_fdccb130b6114aa4b23c49ef8794b730-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;oi&lt;/span&gt;
&lt;a name="rest_code_fdccb130b6114aa4b23c49ef8794b730-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="k"&gt;c&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;
&lt;a name="rest_code_fdccb130b6114aa4b23c49ef8794b730-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;oi&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;
&lt;a name="rest_code_fdccb130b6114aa4b23c49ef8794b730-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"rgan01"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="using-different-join-types"&gt;
&lt;h3&gt;Using Different Join Types&lt;/h3&gt;
&lt;div class="section" id="self-joins"&gt;
&lt;h4&gt;Self Joins&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_3a02fd5d170d4c9187c9180ec68a9375-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;
&lt;a name="rest_code_3a02fd5d170d4c9187c9180ec68a9375-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_3a02fd5d170d4c9187c9180ec68a9375-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="ss"&gt;"Jim Jones"&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_3a02fd5d170d4c9187c9180ec68a9375-4"&gt;&lt;/a&gt;&lt;span class="o"&gt;#&lt;/span&gt; &lt;span class="err"&gt;不喜欢&lt;/span&gt;&lt;span class="k"&gt;self&lt;/span&gt; &lt;span class="k"&gt;join&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_ee911018b8e845d99c886516d8e30e1d-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_contact&lt;/span&gt;
&lt;a name="rest_code_ee911018b8e845d99c886516d8e30e1d-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;c2&lt;/span&gt;
&lt;a name="rest_code_ee911018b8e845d99c886516d8e30e1d-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;c1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;c2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_name&lt;/span&gt;
&lt;a name="rest_code_ee911018b8e845d99c886516d8e30e1d-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;c2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_contact&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"Jim Jones"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="natural-joins"&gt;
&lt;h4&gt;Natural Joins&lt;/h4&gt;
&lt;p&gt;&lt;img alt="image0" src="http://heropublic.oss-cn-beijing.aliyuncs.com/143411.png"&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="outer-joins"&gt;
&lt;h4&gt;Outer Joins&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_b38fca948ba14b2faabf28f0f23eb27c-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;
&lt;a name="rest_code_b38fca948ba14b2faabf28f0f23eb27c-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;inner&lt;/span&gt; &lt;span class="k"&gt;join&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;
&lt;a name="rest_code_b38fca948ba14b2faabf28f0f23eb27c-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_bbe3683ca5554c6da91385d6fbc06d5d-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;
&lt;a name="rest_code_bbe3683ca5554c6da91385d6fbc06d5d-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;left&lt;/span&gt; &lt;span class="k"&gt;outer&lt;/span&gt; &lt;span class="k"&gt;join&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;
&lt;a name="rest_code_bbe3683ca5554c6da91385d6fbc06d5d-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_5e915c99809d428a9fcbfcb25fee3644-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;
&lt;a name="rest_code_5e915c99809d428a9fcbfcb25fee3644-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;right&lt;/span&gt; &lt;span class="k"&gt;outer&lt;/span&gt; &lt;span class="k"&gt;join&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;
&lt;a name="rest_code_5e915c99809d428a9fcbfcb25fee3644-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;on&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="using-joins-with-aggregate-functions"&gt;
&lt;h3&gt;Using Joins with Aggregate Functions&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_6ce190fd0cd24e7aaa775628ce5d6571-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;num_order&lt;/span&gt;
&lt;a name="rest_code_6ce190fd0cd24e7aaa775628ce5d6571-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;
&lt;a name="rest_code_6ce190fd0cd24e7aaa775628ce5d6571-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;
&lt;a name="rest_code_6ce190fd0cd24e7aaa775628ce5d6571-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;group&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_8a9830a28b1f464aa425de0eaa027b9a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;num_order&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="k"&gt;group&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="combining-queries"&gt;
&lt;h2&gt;14.Combining Queries&lt;/h2&gt;
&lt;p&gt;总结, 这一章没有实质的内容, union便是or, intersection便是and&lt;/p&gt;
&lt;div class="section" id="creating-combined-queries"&gt;
&lt;h3&gt;Creating Combined Queries&lt;/h3&gt;
&lt;div class="section" id="using-union"&gt;
&lt;h4&gt;Using UNION&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_e54c65c848334f3cb2bd553f30b43077-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt;
&lt;a name="rest_code_e54c65c848334f3cb2bd553f30b43077-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_e54c65c848334f3cb2bd553f30b43077-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"il"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"in"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"mi"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_e54c65c848334f3cb2bd553f30b43077-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;union&lt;/span&gt;
&lt;a name="rest_code_e54c65c848334f3cb2bd553f30b43077-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ucust_state&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="n"&gt;cust_email&lt;/span&gt;
&lt;a name="rest_code_e54c65c848334f3cb2bd553f30b43077-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_e54c65c848334f3cb2bd553f30b43077-7"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"Fun4All"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_f523defbb2f84530988b6fe62d7eee4e-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt;
&lt;a name="rest_code_f523defbb2f84530988b6fe62d7eee4e-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;customers&lt;/span&gt;
&lt;a name="rest_code_f523defbb2f84530988b6fe62d7eee4e-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"il"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"in"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"mi"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_f523defbb2f84530988b6fe62d7eee4e-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"fun4all"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="union-rules"&gt;
&lt;h4&gt;UNION Rules&lt;/h4&gt;
&lt;p&gt;As you can see, unions are very easy to use. But there are a few rules governing exactly which can be combined:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;A UNION must be composed of two or more SELECT statements, each separated by the keyword UNION (so, if combining four SELECT statements there would be three UNION keywords used).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Each query in a UNION must contain the same columns, expressions, or aggregate functions (and some DBMSs even require that columns be listed in the same order).&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Column datatypes must be compatible: They need not be the exact same type, but they must be of a type that the DBMS can implicitly convert (for example, different numeric types or different date types).&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Aside from these basic rules and restrictions, unions can be used for any data retrieval tasks.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="including-or-eliminating-duplicate-rows"&gt;
&lt;h4&gt;Including or Eliminating Duplicate Rows&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_6ecfdac38161422bba57fc0260cc8a7a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_6ecfdac38161422bba57fc0260cc8a7a-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt;  &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"il"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"in"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"mi"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_6ecfdac38161422bba57fc0260cc8a7a-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;union&lt;/span&gt; &lt;span class="k"&gt;all&lt;/span&gt;
&lt;a name="rest_code_6ecfdac38161422bba57fc0260cc8a7a-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt;
&lt;a name="rest_code_6ecfdac38161422bba57fc0260cc8a7a-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_6ecfdac38161422bba57fc0260cc8a7a-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"fun4all"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="sorting-combined-query-results"&gt;
&lt;h4&gt;Sorting Combined Query Results&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_a4eb942d960e475cba1613e7f30dceb4-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt;
&lt;a name="rest_code_a4eb942d960e475cba1613e7f30dceb4-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_a4eb942d960e475cba1613e7f30dceb4-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt;  &lt;span class="k"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"il"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"in"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"mi"&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_a4eb942d960e475cba1613e7f30dceb4-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;union&lt;/span&gt; &lt;span class="k"&gt;all&lt;/span&gt;
&lt;a name="rest_code_a4eb942d960e475cba1613e7f30dceb4-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt;
&lt;a name="rest_code_a4eb942d960e475cba1613e7f30dceb4-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_a4eb942d960e475cba1613e7f30dceb4-7"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"fun4all"&lt;/span&gt; &lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="using-views"&gt;
&lt;h2&gt;18.Using Views&lt;/h2&gt;
&lt;p&gt;介绍view的三个基本应用&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;simplify complex joins&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Reformat data&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Filter unwanted data&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="section" id="understanding-views"&gt;
&lt;h3&gt;Understanding Views&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_e78e61f7755d4ae5831ef24b9f43b757-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;
&lt;a name="rest_code_e78e61f7755d4ae5831ef24b9f43b757-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;
&lt;a name="rest_code_e78e61f7755d4ae5831ef24b9f43b757-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;
&lt;a name="rest_code_e78e61f7755d4ae5831ef24b9f43b757-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;AND&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;
&lt;a name="rest_code_e78e61f7755d4ae5831ef24b9f43b757-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;AND&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'RGAN01'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_2e482fd51ad24e90a34f34cd0a8b5f78-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;
&lt;a name="rest_code_2e482fd51ad24e90a34f34cd0a8b5f78-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;ProductCustomers&lt;/span&gt;
&lt;a name="rest_code_2e482fd51ad24e90a34f34cd0a8b5f78-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'RGAN01'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="creating-views"&gt;
&lt;h3&gt;Creating Views&lt;/h3&gt;
&lt;div class="section" id="using-views-to-simplify-complex-joins"&gt;
&lt;h4&gt;Using Views to Simplify Complex Joins&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_b8ea8b8ebae2404d96af5e0a1da13256-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="k"&gt;view&lt;/span&gt;  &lt;span class="n"&gt;ProductCustomers&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt;
&lt;a name="rest_code_b8ea8b8ebae2404d96af5e0a1da13256-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;
&lt;a name="rest_code_b8ea8b8ebae2404d96af5e0a1da13256-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;
&lt;a name="rest_code_b8ea8b8ebae2404d96af5e0a1da13256-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;
&lt;a name="rest_code_b8ea8b8ebae2404d96af5e0a1da13256-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;and&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_402a76fb427c428b8faf988eda72d4a2-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;ProductCustomers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_d02467ca2525492983bebd829c4732d3-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;
&lt;a name="rest_code_d02467ca2525492983bebd829c4732d3-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;ProductCustomers&lt;/span&gt;
&lt;a name="rest_code_d02467ca2525492983bebd829c4732d3-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"rgan01"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="using-views-to-reformat-retrieved-data"&gt;
&lt;h4&gt;Using Views to Reformat Retrieved Data&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_ae29306b0dca470783db4d62e6f05a4e-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;concat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;trim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="ss"&gt;" ("&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;trim&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vend_country&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="ss"&gt;") "&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;vend_title&lt;/span&gt;
&lt;a name="rest_code_ae29306b0dca470783db4d62e6f05a4e-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt; &lt;span class="k"&gt;order&lt;/span&gt; &lt;span class="k"&gt;by&lt;/span&gt; &lt;span class="n"&gt;vend_name&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;table&gt;
&lt;colgroup&gt;
&lt;col style="width: 100%"&gt;
&lt;/colgroup&gt;
&lt;thead&gt;
&lt;tr&gt;&lt;th class="head"&gt;&lt;p&gt;vend&lt;sub&gt;title&lt;/sub&gt;&lt;/p&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;Bear Emporium (USA)&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;Bears R Us (USA)&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;Doll House Inc. (USA)&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;Fun and Games (England)&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;Furball Inc. (USA)&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;&lt;td&gt;&lt;p&gt;Jouets et ours (France)&lt;/p&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;/div&gt;
&lt;div class="section" id="using-views-to-filter-unwanted-data"&gt;
&lt;h4&gt;Using Views to Filter Unwanted Data&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_5fcb7a9cc7fe4066b6df10abcff1c931-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;VIEW&lt;/span&gt; &lt;span class="n"&gt;CustomerEMailList&lt;/span&gt; &lt;span class="k"&gt;AS&lt;/span&gt;
&lt;a name="rest_code_5fcb7a9cc7fe4066b6df10abcff1c931-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt;
&lt;a name="rest_code_5fcb7a9cc7fe4066b6df10abcff1c931-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_5fcb7a9cc7fe4066b6df10abcff1c931-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt; &lt;span class="k"&gt;IS&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_e865c6232169435eac5b7d01e87a8611-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;CustomerEMailList&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_5eca637ee78e4c05b77ee550173f0ecb-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="k"&gt;view&lt;/span&gt; &lt;span class="n"&gt;OrderItemsExpanded&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt;
&lt;a name="rest_code_5eca637ee78e4c05b77ee550173f0ecb-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;quantity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item_price&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;quantity&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;item_price&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;expanded_price&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt; &lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;20008&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="inserting-data"&gt;
&lt;h2&gt;15.Inserting Data&lt;/h2&gt;
&lt;p&gt;总结 讲到了最关键的一点, 如何增加数据. insert completed rows, partial rows, insert retrieved data, copy&lt;/p&gt;
&lt;div class="section" id="understanding-data-insertion"&gt;
&lt;h3&gt;Understanding Data Insertion&lt;/h3&gt;
&lt;div class="section" id="inserting-complete-rows"&gt;
&lt;h4&gt;Inserting Complete Rows&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_b1bc858d5b8a4d2280b31cdab9d9141d-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;insert&lt;/span&gt; &lt;span class="k"&gt;into&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_b1bc858d5b8a4d2280b31cdab9d9141d-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;values&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"1000000006"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="ss"&gt;"toy land"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"123 any street"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"New York"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"NY"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"11111"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"USA"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_54dab1e311a84d5f8413c622e3daae79-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;insert&lt;/span&gt; &lt;span class="k"&gt;into&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_address&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_city&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_zip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="n"&gt;cust_email&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;values&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;"1000000012"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"boy land"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"456 any street"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"New York"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"NY"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"11111"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;"USA"&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-2"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-3"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_email&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-4"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-5"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_address&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-6"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_city&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-7"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-8"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_zip&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-9"&gt;&lt;/a&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'1000000006'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-10"&gt;&lt;/a&gt;       &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-11"&gt;&lt;/a&gt;       &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-12"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'Toy Land'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-13"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'123 Any Street'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-14"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'New York'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-15"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'NY'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_e50cfcf32eb648b289838e86f1b4246a-16"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'11111'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="inserting-partial-rows"&gt;
&lt;h4&gt;Inserting Partial Rows&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-2"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-3"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_address&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-4"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_city&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-5"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-6"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_zip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-7"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_country&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;VALUES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'1000000006'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-9"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'Toy Land'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-10"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'123 Any Street'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-11"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'New York'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-12"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'NY'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-13"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'11111'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_b1a144e78f484a6fac1032eb1d3ede36-14"&gt;&lt;/a&gt;       &lt;span class="s1"&gt;'USA'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="inserting-retrieved-data"&gt;
&lt;h4&gt;Inserting Retrieved Data&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-2"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-3"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_email&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-4"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-5"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_address&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-6"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_city&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-7"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-8"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_zip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-9"&gt;&lt;/a&gt;                      &lt;span class="n"&gt;cust_country&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-10"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-11"&gt;&lt;/a&gt;       &lt;span class="n"&gt;cust_contact&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-12"&gt;&lt;/a&gt;       &lt;span class="n"&gt;cust_email&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-13"&gt;&lt;/a&gt;       &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-14"&gt;&lt;/a&gt;       &lt;span class="n"&gt;cust_address&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-15"&gt;&lt;/a&gt;       &lt;span class="n"&gt;cust_city&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-16"&gt;&lt;/a&gt;       &lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-17"&gt;&lt;/a&gt;       &lt;span class="n"&gt;cust_zip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-18"&gt;&lt;/a&gt;       &lt;span class="n"&gt;cust_country&lt;/span&gt;
&lt;a name="rest_code_f4b66f7c418c44bf9c140f108937477a-19"&gt;&lt;/a&gt;       &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;CustNew&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="copying-from-one-table-to-another"&gt;
&lt;h3&gt;Copying from One Table to Another&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_4f361ddbeb3a47ee838858750532d4e7-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;CustCopy&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_a357867ce9014af0b66618b82a390ff1-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;custcopy&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt;
&lt;a name="rest_code_a357867ce9014af0b66618b82a390ff1-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_f324584c2cdb4207a4112173d43940f4-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;custcopy&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="updating-and-deleting-data"&gt;
&lt;h2&gt;16.Updating and Deleting Data&lt;/h2&gt;
&lt;p&gt;update table set #multiple 没有comma delete from&lt;/p&gt;
&lt;div class="section" id="updating-data"&gt;
&lt;h3&gt;Updating Data&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_812b82ee8f604df782356315f26ffc45-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;update&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_812b82ee8f604df782356315f26ffc45-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;set&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"kim@thetoystore.com"&lt;/span&gt;
&lt;a name="rest_code_812b82ee8f604df782356315f26ffc45-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;where&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="ss"&gt;"1000000005"&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;&lt;code class="docutils literal"&gt;SET cust_email = 'kim@thetoystore.com'&lt;/code&gt;&lt;/p&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_a1102b898f8148e8add72adf4a697aa2-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_a1102b898f8148e8add72adf4a697aa2-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;cust_contact&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'Sam Roberts'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_a1102b898f8148e8add72adf4a697aa2-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;cust_email&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'sam@toyland.com'&lt;/span&gt;
&lt;a name="rest_code_a1102b898f8148e8add72adf4a697aa2-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'1000000006'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_4740e69c86d44a57854f8af0091e4683-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_4740e69c86d44a57854f8af0091e4683-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
&lt;a name="rest_code_4740e69c86d44a57854f8af0091e4683-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'1000000005'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="deleting-data"&gt;
&lt;h3&gt;Deleting Data&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_4ac2744c48324bef8b7d28dbe9221818-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;DELETE&lt;/span&gt;
&lt;a name="rest_code_4ac2744c48324bef8b7d28dbe9221818-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_4ac2744c48324bef8b7d28dbe9221818-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;'1000000006'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="creating-and-manipulating-tables"&gt;
&lt;h2&gt;17.Creating and Manipulating Tables&lt;/h2&gt;
&lt;p&gt;总结 create table, work with null, default value, alter table drop table&lt;/p&gt;
&lt;div class="section" id="creating-tables"&gt;
&lt;h3&gt;Creating Tables&lt;/h3&gt;
&lt;div class="section" id="basic-table-creation"&gt;
&lt;h4&gt;Basic Table Creation&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_da832382abe44c9b8f61054cbc156240-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;Products3&lt;/span&gt;
&lt;a name="rest_code_da832382abe44c9b8f61054cbc156240-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_da832382abe44c9b8f61054cbc156240-3"&gt;&lt;/a&gt;    &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="nb"&gt;CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_da832382abe44c9b8f61054cbc156240-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;vend_id&lt;/span&gt; &lt;span class="nb"&gt;CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_da832382abe44c9b8f61054cbc156240-5"&gt;&lt;/a&gt;    &lt;span class="n"&gt;prod_name&lt;/span&gt; &lt;span class="nb"&gt;CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;254&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_da832382abe44c9b8f61054cbc156240-6"&gt;&lt;/a&gt;    &lt;span class="n"&gt;prod_price&lt;/span&gt; &lt;span class="nb"&gt;DECIMAL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_da832382abe44c9b8f61054cbc156240-7"&gt;&lt;/a&gt;    &lt;span class="n"&gt;prod_desc&lt;/span&gt; &lt;span class="nb"&gt;VARCHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="k"&gt;NULL&lt;/span&gt;
&lt;a name="rest_code_da832382abe44c9b8f61054cbc156240-8"&gt;&lt;/a&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="working-with-null-values"&gt;
&lt;h4&gt;Working With Null Values&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_f45e421907c74055bc8c53361f841bfc-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;Contracts2&lt;/span&gt;
&lt;a name="rest_code_f45e421907c74055bc8c53361f841bfc-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;contract_num&lt;/span&gt; &lt;span class="nb"&gt;integer&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f45e421907c74055bc8c53361f841bfc-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;contract_date&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_f45e421907c74055bc8c53361f841bfc-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;contract_id&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_80f36ee5f68d46f4a5caef5117ea9fbf-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;Suppliers&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_80f36ee5f68d46f4a5caef5117ea9fbf-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;supplier_id&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_80f36ee5f68d46f4a5caef5117ea9fbf-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;supplier_name&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_80f36ee5f68d46f4a5caef5117ea9fbf-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;supplier_address&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_80f36ee5f68d46f4a5caef5117ea9fbf-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;supplier_city&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_80f36ee5f68d46f4a5caef5117ea9fbf-6"&gt;&lt;/a&gt;&lt;span class="n"&gt;supplier_state&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_80f36ee5f68d46f4a5caef5117ea9fbf-7"&gt;&lt;/a&gt;&lt;span class="n"&gt;supplier_zip&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_80f36ee5f68d46f4a5caef5117ea9fbf-8"&gt;&lt;/a&gt;&lt;span class="n"&gt;supplier_country&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;50&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="specifying-default-values"&gt;
&lt;h4&gt;Specifying Default Values&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_1111bd7047cc4b1e93f58c3a92c6d8da-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;create&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;ContractItems&lt;/span&gt;
&lt;a name="rest_code_1111bd7047cc4b1e93f58c3a92c6d8da-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_1111bd7047cc4b1e93f58c3a92c6d8da-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;contract_num&lt;/span&gt; &lt;span class="nb"&gt;integer&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_1111bd7047cc4b1e93f58c3a92c6d8da-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;contract_item&lt;/span&gt; &lt;span class="nb"&gt;integer&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_1111bd7047cc4b1e93f58c3a92c6d8da-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_1111bd7047cc4b1e93f58c3a92c6d8da-6"&gt;&lt;/a&gt;&lt;span class="n"&gt;quantity&lt;/span&gt; &lt;span class="nb"&gt;integer&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_1111bd7047cc4b1e93f58c3a92c6d8da-7"&gt;&lt;/a&gt;&lt;span class="n"&gt;item_price&lt;/span&gt; &lt;span class="nb"&gt;decimal&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;not&lt;/span&gt; &lt;span class="k"&gt;null&lt;/span&gt;
&lt;a name="rest_code_1111bd7047cc4b1e93f58c3a92c6d8da-8"&gt;&lt;/a&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;div class="figure"&gt;
&lt;img alt="Screen Shot 2018-08-13 at 11.11.20 AM" src="http://heropublic.oss-cn-beijing.aliyuncs.com/031136.png"&gt;
&lt;p class="caption"&gt;Screen Shot 2018-08-13 at 11.11.20 AM&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="updating-tables"&gt;
&lt;h3&gt;Updating Tables&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_dd887423f3a9479f931dc3237e0838a4-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;alter&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;Suppliers&lt;/span&gt; &lt;span class="k"&gt;add&lt;/span&gt; &lt;span class="n"&gt;supplier_phone&lt;/span&gt; &lt;span class="nb"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_6a60737476c444c297375a033a693001-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;select&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;from&lt;/span&gt; &lt;span class="n"&gt;Suppliers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_572f23f9fb674c94a1ad235f429c92d0-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;alter&lt;/span&gt; &lt;span class="k"&gt;table&lt;/span&gt; &lt;span class="n"&gt;Suppliers&lt;/span&gt;
&lt;a name="rest_code_572f23f9fb674c94a1ad235f429c92d0-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;drop&lt;/span&gt; &lt;span class="k"&gt;column&lt;/span&gt; &lt;span class="n"&gt;supplier_phone&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="deleting-tables"&gt;
&lt;h3&gt;Deleting Tables&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_92f9df13f39c4e9686454375a51d533b-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;DROP&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;Suppliers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="renaming-tables"&gt;
&lt;h3&gt;Renaming Tables&lt;/h3&gt;
&lt;/div&gt;
&lt;div class="section" id="summary"&gt;
&lt;h3&gt;Summary&lt;/h3&gt;
&lt;p&gt;In this lesson, you learned several new SQL statements. CREATE TABLE is used to create new tables, ALTER TABLE is used to change table columns (or other objects like constraints or indexes), and DROP TABLE is used to completely delete a table. These statements should be used with extreme caution, and only after backups have been made. As the exact syntax of each of these statements varies from one DBMS to another, you should consult your own DBMS documentation for more information.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Foreign-Key首先是数据类型其次才是connecting point&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="working-with-stored-procedures"&gt;
&lt;h2&gt;19.Working with Stored Procedures&lt;/h2&gt;
&lt;div class="section" id="executing-stored-procedures"&gt;
&lt;h3&gt;Executing Stored Procedures&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_be81b8d0787544fcbfe006a7d200af19-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;EXECUTE&lt;/span&gt; &lt;span class="n"&gt;AddNewProduct&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'JTS01'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_be81b8d0787544fcbfe006a7d200af19-2"&gt;&lt;/a&gt;                      &lt;span class="s1"&gt;'Stuffed Eiffel Tower'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_be81b8d0787544fcbfe006a7d200af19-3"&gt;&lt;/a&gt;                      &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;a name="rest_code_be81b8d0787544fcbfe006a7d200af19-4"&gt;&lt;/a&gt;                      &lt;span class="s1"&gt;'Plush stuffed toy with the text La Tour Eiffel in red white and blue'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="creating-stored-procedures"&gt;
&lt;h3&gt;Creating Stored Procedures&lt;/h3&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;PROCEDURE&lt;/span&gt; &lt;span class="n"&gt;MailingListCount&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;ListCount&lt;/span&gt; &lt;span class="k"&gt;OUT&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;IS&lt;/span&gt;
&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;v_rows&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;BEGIN&lt;/span&gt;
&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-6"&gt;&lt;/a&gt;    &lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="k"&gt;COUNT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;v_rows&lt;/span&gt;
&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-7"&gt;&lt;/a&gt;    &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-8"&gt;&lt;/a&gt;    &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="k"&gt;NOT&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt; &lt;span class="k"&gt;IS&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-9"&gt;&lt;/a&gt;    &lt;span class="n"&gt;ListCount&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;v_rows&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_dc7002cd869f4aca99ccc8f742838590-10"&gt;&lt;/a&gt;    &lt;span class="k"&gt;END&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_63b112516a964260900e38770f513bc6-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;var&lt;/span&gt; &lt;span class="n"&gt;ReturnValue&lt;/span&gt; &lt;span class="nb"&gt;NUMBER&lt;/span&gt;
&lt;a name="rest_code_63b112516a964260900e38770f513bc6-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;EXEC&lt;/span&gt; &lt;span class="n"&gt;MailingListCount&lt;/span&gt;&lt;span class="p"&gt;(:&lt;/span&gt;&lt;span class="n"&gt;ReturnValue&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_63b112516a964260900e38770f513bc6-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="n"&gt;ReturnValue&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="managing-transaction-processing"&gt;
&lt;h2&gt;20.Managing Transaction Processing&lt;/h2&gt;
&lt;div class="section" id="controlling-transactions"&gt;
&lt;h3&gt;Controlling Transactions&lt;/h3&gt;
&lt;div class="section" id="using-rollback"&gt;
&lt;h4&gt;Using Rollback&lt;/h4&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_061cfaac79a74337bad238b47c2be10b-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;DELETE&lt;/span&gt; &lt;span class="n"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_061cfaac79a74337bad238b47c2be10b-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;ROLLBACK&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="using-commit"&gt;
&lt;h4&gt;Using Commit&lt;/h4&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_463a763daa134c22a9a6d553167e3f59-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;BEGIN&lt;/span&gt; &lt;span class="n"&gt;TRANSACTION&lt;/span&gt;
&lt;a name="rest_code_463a763daa134c22a9a6d553167e3f59-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;DELETE&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt; &lt;span class="n"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12345&lt;/span&gt;
&lt;a name="rest_code_463a763daa134c22a9a6d553167e3f59-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;DELETE&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt; &lt;span class="n"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12345&lt;/span&gt;
&lt;a name="rest_code_463a763daa134c22a9a6d553167e3f59-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;COMMIT&lt;/span&gt; &lt;span class="n"&gt;TRANSACTION&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code python"&gt;&lt;a name="rest_code_5c47f8b7e3fd4970bfdda6d540b5751e-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;TRANSACTION&lt;/span&gt;
&lt;a name="rest_code_5c47f8b7e3fd4970bfdda6d540b5751e-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;DELETE&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt; &lt;span class="n"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12345&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_5c47f8b7e3fd4970bfdda6d540b5751e-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;DELETE&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt; &lt;span class="n"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12345&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_5c47f8b7e3fd4970bfdda6d540b5751e-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;COMMIT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="using-savepoints"&gt;
&lt;h4&gt;Using Savepoints&lt;/h4&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;BEGIN&lt;/span&gt; &lt;span class="n"&gt;TRANSACTION&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;INSERT&lt;/span&gt; &lt;span class="n"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-3"&gt;&lt;/a&gt;&lt;span class="n"&gt;VALUES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;'1000000010'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'Toys Emporium'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-4"&gt;&lt;/a&gt;&lt;span class="n"&gt;SAVE&lt;/span&gt; &lt;span class="n"&gt;TRANSACTION&lt;/span&gt; &lt;span class="n"&gt;StartOrder&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-5"&gt;&lt;/a&gt;&lt;span class="n"&gt;INSERT&lt;/span&gt; &lt;span class="n"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;order_date&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;VALUES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'2001/12/1'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="s1"&gt;'1000000010'&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-6"&gt;&lt;/a&gt;&lt;span class="n"&gt;IF&lt;/span&gt; &lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="nd"&gt;@ERROR&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;ROLLBACK&lt;/span&gt; &lt;span class="n"&gt;TRANSACTION&lt;/span&gt; &lt;span class="n"&gt;StartOrder&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-7"&gt;&lt;/a&gt;&lt;span class="n"&gt;INSERT&lt;/span&gt; &lt;span class="n"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;order_item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;quantity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-8"&gt;&lt;/a&gt;&lt;span class="n"&gt;VALUES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'BR01'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;5.49&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-9"&gt;&lt;/a&gt;&lt;span class="n"&gt;IF&lt;/span&gt; &lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="nd"&gt;@ERROR&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;ROLLBACK&lt;/span&gt; &lt;span class="n"&gt;TRANSACTION&lt;/span&gt; &lt;span class="n"&gt;StartOrder&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-10"&gt;&lt;/a&gt;&lt;span class="n"&gt;INSERT&lt;/span&gt; &lt;span class="n"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;order_num&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;order_item&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;prod_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;quantity&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item_price&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;VALUES&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;20100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;'BR03'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;10.99&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-11"&gt;&lt;/a&gt;&lt;span class="n"&gt;IF&lt;/span&gt; &lt;span class="err"&gt;@&lt;/span&gt;&lt;span class="nd"&gt;@ERROR&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;ROLLBACK&lt;/span&gt; &lt;span class="n"&gt;TRANSACTION&lt;/span&gt; &lt;span class="n"&gt;StartOrder&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_9d575ec96143499b9e79f1f35eff9603-12"&gt;&lt;/a&gt;&lt;span class="n"&gt;COMMIT&lt;/span&gt; &lt;span class="n"&gt;TRANSACTION&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="using-cursors"&gt;
&lt;h2&gt;21.Using Cursors&lt;/h2&gt;
&lt;div class="section" id="working-with-cursors"&gt;
&lt;h3&gt;Working With Cursors&lt;/h3&gt;
&lt;div class="section" id="creating-cursors"&gt;
&lt;h4&gt;Creating Cursors&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_08578e2b5a824ffaa9016e5f1c889b6e-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;DECLARE&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt; &lt;span class="k"&gt;CURSOR&lt;/span&gt;
&lt;a name="rest_code_08578e2b5a824ffaa9016e5f1c889b6e-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;FOR&lt;/span&gt;
&lt;a name="rest_code_08578e2b5a824ffaa9016e5f1c889b6e-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_08578e2b5a824ffaa9016e5f1c889b6e-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt; &lt;span class="k"&gt;IS&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_d8ac7ca4d1fa40acbf50d8bd59d3e6da-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;DECLARE&lt;/span&gt; &lt;span class="k"&gt;CURSOR&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt;
&lt;a name="rest_code_d8ac7ca4d1fa40acbf50d8bd59d3e6da-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;IS&lt;/span&gt;
&lt;a name="rest_code_d8ac7ca4d1fa40acbf50d8bd59d3e6da-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;FROM&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;cust_email&lt;/span&gt; &lt;span class="k"&gt;IS&lt;/span&gt; &lt;span class="k"&gt;NULL&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="id2"&gt;
&lt;span id="using-cursors-1"&gt;&lt;/span&gt;&lt;h4&gt;Using Cursors&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_4b978b4ab2224adfb9e5635829a53929-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;DECLARE&lt;/span&gt; &lt;span class="k"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt; &lt;span class="k"&gt;IS&lt;/span&gt; &lt;span class="k"&gt;REF&lt;/span&gt; &lt;span class="k"&gt;CURSOR&lt;/span&gt;
&lt;a name="rest_code_4b978b4ab2224adfb9e5635829a53929-2"&gt;&lt;/a&gt;    &lt;span class="k"&gt;RETURN&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;ROWTYPE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_4b978b4ab2224adfb9e5635829a53929-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;DECLARE&lt;/span&gt; &lt;span class="n"&gt;CustRecord&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;ROWTYPE&lt;/span&gt;
&lt;a name="rest_code_4b978b4ab2224adfb9e5635829a53929-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;BEGIN&lt;/span&gt;
&lt;a name="rest_code_4b978b4ab2224adfb9e5635829a53929-5"&gt;&lt;/a&gt;    &lt;span class="k"&gt;OPEN&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_4b978b4ab2224adfb9e5635829a53929-6"&gt;&lt;/a&gt;    &lt;span class="k"&gt;FETCH&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;CustRecord&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_4b978b4ab2224adfb9e5635829a53929-7"&gt;&lt;/a&gt;    &lt;span class="k"&gt;CLOSE&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_4b978b4ab2224adfb9e5635829a53929-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;END&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-1"&gt;&lt;/a&gt;    &lt;span class="k"&gt;DECLARE&lt;/span&gt; &lt;span class="k"&gt;TYPE&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt; &lt;span class="k"&gt;IS&lt;/span&gt; &lt;span class="k"&gt;REF&lt;/span&gt; &lt;span class="k"&gt;CURSOR&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-2"&gt;&lt;/a&gt;        &lt;span class="k"&gt;RETURN&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;ROWTYPE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-3"&gt;&lt;/a&gt;    &lt;span class="k"&gt;DECLARE&lt;/span&gt; &lt;span class="n"&gt;CustRecord&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;ROWTYPE&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-4"&gt;&lt;/a&gt;    &lt;span class="k"&gt;BEGIN&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-5"&gt;&lt;/a&gt;        &lt;span class="k"&gt;OPEN&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-6"&gt;&lt;/a&gt;        &lt;span class="n"&gt;LOOP&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-7"&gt;&lt;/a&gt;        &lt;span class="k"&gt;FETCH&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt; &lt;span class="k"&gt;INTO&lt;/span&gt; &lt;span class="n"&gt;CustRecord&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-8"&gt;&lt;/a&gt;        &lt;span class="n"&gt;EXIT&lt;/span&gt; &lt;span class="k"&gt;WHEN&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt;&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;NOTFOUND&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-9"&gt;&lt;/a&gt;        &lt;span class="p"&gt;...&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-10"&gt;&lt;/a&gt;&lt;span class="p"&gt;.&lt;/span&gt;        &lt;span class="k"&gt;END&lt;/span&gt; &lt;span class="n"&gt;LOOP&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;a name="rest_code_eb4d361d171841768a4efe934a5d7593-11"&gt;&lt;/a&gt;        &lt;span class="k"&gt;CLOSE&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="closing-cursors"&gt;
&lt;h4&gt;Closing Cursors&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_28028eb4855a41baac1c977886e722fb-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CLOSE&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Here's the Microsoft SQL Server version:&lt;/p&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_effd810782b04a5b8799dfec202a6252-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CLOSE&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt;
&lt;a name="rest_code_effd810782b04a5b8799dfec202a6252-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;DEALLOCATE&lt;/span&gt; &lt;span class="k"&gt;CURSOR&lt;/span&gt; &lt;span class="n"&gt;CustCursor&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;The CLOSE statement is used to close cursors; once a cursor is closed, it cannot be reused without being opened again. However, a cursor does not need to be declared again to be used; an OPEN is sufficient.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="understanding-advanced-sql-features"&gt;
&lt;h2&gt;22.Understanding Advanced SQL Features&lt;/h2&gt;
&lt;div class="section" id="understanding-constraints"&gt;
&lt;h3&gt;Understanding Constraints&lt;/h3&gt;
&lt;div class="section" id="id3"&gt;
&lt;span id="primary-keys-1"&gt;&lt;/span&gt;&lt;h4&gt;Primary Keys&lt;/h4&gt;
&lt;div class="figure"&gt;
&lt;img alt="Screen Shot 2018-08-13 at 10.28.19 PM" src="http://heropublic.oss-cn-beijing.aliyuncs.com/142840.png"&gt;
&lt;p class="caption"&gt;Screen Shot 2018-08-13 at 10.28.19 PM&lt;/p&gt;
&lt;/div&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_f77c3acbc1e745bdb175d25ffcd44a97-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;ALTER&lt;/span&gt; &lt;span class="n"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;Vendors&lt;/span&gt;
&lt;a name="rest_code_f77c3acbc1e745bdb175d25ffcd44a97-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;ADD&lt;/span&gt; &lt;span class="n"&gt;CONSTRAINT&lt;/span&gt; &lt;span class="n"&gt;PRIMARY&lt;/span&gt; &lt;span class="n"&gt;KEY&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vend_id&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="foreign-keys"&gt;
&lt;h4&gt;Foreign Keys&lt;/h4&gt;
&lt;pre class="code python"&gt;&lt;a name="rest_code_1727c105a11f4f769a183fedc5a6fca5-1"&gt;&lt;/a&gt;&lt;span class="n"&gt;MySQL&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;distributor&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;create&lt;/span&gt; &lt;span class="n"&gt;table&lt;/span&gt; &lt;span class="n"&gt;oorders&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="n"&gt;integer&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;null&lt;/span&gt; &lt;span class="n"&gt;primary&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;order_date&lt;/span&gt; &lt;span class="n"&gt;datetime&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="n"&gt;char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;null&lt;/span&gt; &lt;span class="n"&gt;references&lt;/span&gt; &lt;span class="n"&gt;customers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;a name="rest_code_1727c105a11f4f769a183fedc5a6fca5-2"&gt;&lt;/a&gt;&lt;span class="n"&gt;Query&lt;/span&gt; &lt;span class="n"&gt;OK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="n"&gt;rows&lt;/span&gt; &lt;span class="n"&gt;affected&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;0.157&lt;/span&gt; &lt;span class="n"&gt;sec&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;pre class="code sql"&gt;&lt;a name="rest_code_f7213c241c694b93b77cd2d7decd7186-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;ALTER&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;Orders&lt;/span&gt;
&lt;a name="rest_code_f7213c241c694b93b77cd2d7decd7186-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;ADD&lt;/span&gt; &lt;span class="k"&gt;CONSTRAINT&lt;/span&gt;
&lt;a name="rest_code_f7213c241c694b93b77cd2d7decd7186-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;FOREIGN&lt;/span&gt; &lt;span class="k"&gt;KEY&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;REFERENCES&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;#+BEGIN&lt;sub&gt;QUOTE&lt;/sub&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="unique-constraints"&gt;
&lt;h4&gt;Unique Constraints&lt;/h4&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_a6b67f7996d74f94bea5475b273a7e11-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TABLE&lt;/span&gt; &lt;span class="n"&gt;OrderItems&lt;/span&gt;
&lt;a name="rest_code_a6b67f7996d74f94bea5475b273a7e11-2"&gt;&lt;/a&gt;&lt;span class="p"&gt;(&lt;/span&gt;
&lt;a name="rest_code_a6b67f7996d74f94bea5475b273a7e11-3"&gt;&lt;/a&gt;    &lt;span class="n"&gt;order_num&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt;
&lt;a name="rest_code_a6b67f7996d74f94bea5475b273a7e11-4"&gt;&lt;/a&gt;    &lt;span class="n"&gt;order_item&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt;
&lt;a name="rest_code_a6b67f7996d74f94bea5475b273a7e11-5"&gt;&lt;/a&gt;    &lt;span class="n"&gt;prod_id&lt;/span&gt; &lt;span class="nb"&gt;CHAR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;quantity&lt;/span&gt; &lt;span class="nb"&gt;INTEGER&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;a name="rest_code_a6b67f7996d74f94bea5475b273a7e11-6"&gt;&lt;/a&gt;   &lt;span class="n"&gt;item_price&lt;/span&gt; &lt;span class="n"&gt;MONEY&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="understanding-indexes"&gt;
&lt;h3&gt;Understanding Indexes&lt;/h3&gt;
&lt;p&gt;The following statement creates a simple index on the Products table's product name column:&lt;/p&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_adced2a565e7428a9cc06f5956f115a5-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;INDEX&lt;/span&gt; &lt;span class="n"&gt;prod_name_ind&lt;/span&gt;
&lt;a name="rest_code_adced2a565e7428a9cc06f5956f115a5-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;PRODUCTS&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;prod_name&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;Every index must be uniquely named. Here the name prod&lt;sub&gt;nameind&lt;/sub&gt; is defined after the keywords CREATE INDEX. ON is used to specify the table being indexed, and the columns to include in the index (just one in this example) are specified in parentheses after the table name.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Tip: Revisiting Indexes&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Index effectiveness changes as table data is added or changed. Many database administrators find that what once was an ideal set of indexes might not be so ideal after several months of data manipulation. It is always a good idea to revisit indexes on a regular basis to fine-tune them as needed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="understanding-triggers"&gt;
&lt;h3&gt;Understanding Triggers&lt;/h3&gt;
&lt;p&gt;Triggers are special stored procedures that are executed automatically when specific database activity occurs. Triggers might be associated with &lt;strong&gt;INSERT, UPDATE, and DELETE operations&lt;/strong&gt; (or any combination thereof) on specific tables.&lt;/p&gt;
&lt;p&gt;Unlike stored procedures (which are simply stored SQL statements), triggers are tied to individual tables. A trigger associated with INSERT operations on the Orders table will be executed only when a row is inserted into the Orders table. Similarly, a trigger on INSERT and UPDATE operations on the Customers table will be executed only when those specific operations occur on that table.&lt;/p&gt;
&lt;p&gt;Within triggers, your code has access to the following:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;All new data in INSERT operations&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;All new data and old data in UPDATE operations&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Deleted data in DELETE operations&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Depending on the DBMS being used, triggers can be executed before or after a specified operation is performed.&lt;/p&gt;
&lt;p&gt;The following are some common uses for Triggers:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;Ensuring data consistency—For example, converting all state names to uppercase during an INSERT or UPDATE operation&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Performing actions on other tables based on changes to a table—For example, writing an audit trail record to a log table each time a row is updated or deleted&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Performing additional validation and rolling back data if needed—For example, making sure a customer's available credit has not been exceeded and blocking the insertion if it has&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Calculating computed column values or updating timestamps As you probably expect by now, trigger creation syntax varies dramatically from one DBMS to another. Check your documentation for more details.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;As you probably expect by now, trigger creation syntax varies dramatically from one DBMS to another. Check your documentation for more details.&lt;/p&gt;
&lt;p&gt;The following example creates a trigger that converts the cust&lt;sub&gt;state&lt;/sub&gt; column in the Customers table to uppercase on all INSERT and UPDATE operations.&lt;/p&gt;
&lt;p&gt;This is the SQL Server version:&lt;/p&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_e7bd7dfb8ca847cbad75310e99a0514d-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TRIGGER&lt;/span&gt; &lt;span class="n"&gt;customer_state&lt;/span&gt;
&lt;a name="rest_code_e7bd7dfb8ca847cbad75310e99a0514d-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;ON&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_e7bd7dfb8ca847cbad75310e99a0514d-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;FOR&lt;/span&gt; &lt;span class="k"&gt;INSERT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;UPDATE&lt;/span&gt;
&lt;a name="rest_code_e7bd7dfb8ca847cbad75310e99a0514d-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;AS&lt;/span&gt;
&lt;a name="rest_code_e7bd7dfb8ca847cbad75310e99a0514d-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_e7bd7dfb8ca847cbad75310e99a0514d-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;Upper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_e7bd7dfb8ca847cbad75310e99a0514d-7"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;inserted&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;p&gt;This is the Oracle and PostgreSQL version:&lt;/p&gt;
&lt;pre class="code sql"&gt;&lt;a name="rest_code_446ca85515c04eb0a5a01c2cea058b01-1"&gt;&lt;/a&gt;&lt;span class="k"&gt;CREATE&lt;/span&gt; &lt;span class="k"&gt;TRIGGER&lt;/span&gt; &lt;span class="n"&gt;customer_state&lt;/span&gt;
&lt;a name="rest_code_446ca85515c04eb0a5a01c2cea058b01-2"&gt;&lt;/a&gt;&lt;span class="k"&gt;AFTER&lt;/span&gt; &lt;span class="k"&gt;INSERT&lt;/span&gt; &lt;span class="k"&gt;OR&lt;/span&gt; &lt;span class="k"&gt;UPDATE&lt;/span&gt;
&lt;a name="rest_code_446ca85515c04eb0a5a01c2cea058b01-3"&gt;&lt;/a&gt;&lt;span class="k"&gt;FOR&lt;/span&gt; &lt;span class="k"&gt;EACH&lt;/span&gt; &lt;span class="k"&gt;ROW&lt;/span&gt;
&lt;a name="rest_code_446ca85515c04eb0a5a01c2cea058b01-4"&gt;&lt;/a&gt;&lt;span class="k"&gt;BEGIN&lt;/span&gt;
&lt;a name="rest_code_446ca85515c04eb0a5a01c2cea058b01-5"&gt;&lt;/a&gt;&lt;span class="k"&gt;UPDATE&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;
&lt;a name="rest_code_446ca85515c04eb0a5a01c2cea058b01-6"&gt;&lt;/a&gt;&lt;span class="k"&gt;SET&lt;/span&gt; &lt;span class="n"&gt;cust_state&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;Upper&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cust_state&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;a name="rest_code_446ca85515c04eb0a5a01c2cea058b01-7"&gt;&lt;/a&gt;&lt;span class="k"&gt;WHERE&lt;/span&gt; &lt;span class="n"&gt;Customers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="k"&gt;OLD&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;cust_id&lt;/span&gt;
&lt;a name="rest_code_446ca85515c04eb0a5a01c2cea058b01-8"&gt;&lt;/a&gt;&lt;span class="k"&gt;END&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;!--  --&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Tip: Constraints Are Faster Than Triggers&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As a rule, constraints are processed more quickly than triggers, so whenever possible, use constraints instead.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/div&gt;
&lt;div class="section" id="database-security"&gt;
&lt;h3&gt;Database Security&lt;/h3&gt;
&lt;p&gt;There is nothing more valuable to an organization than its data, and data should always be protected from would-be thieves or casual browsers. Of course, at the same time data must be accessible to users who need access to it, and so most DBMSs provide administrators with mechanisms by which to grant or restrict access to data.&lt;/p&gt;
&lt;p&gt;The foundation of any security system is user authorization and authentication. This is the process by which a user is validated to ensure he is who he says he is and that he is allowed to perform the operation he is trying to perform. Some DBMSs integrate with operating system security for this, others maintain their own user and password lists, and still others integrate with external directory services servers.&lt;/p&gt;
&lt;p&gt;Some operations that are often secured&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;&lt;p&gt;Access to database administration features (creating tables, altering or dropping existing tables, and so on)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Access to specific databases or tables&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The type of access (read-only, access to specific columns, and so on)&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Access to tables via views or stored procedures only&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Creation of multiple levels of security, thus allowing varying degrees of access and control based on login&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Restricting the ability to manage user accounts&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Security is managed via the SQL GRANT and REVOKE statements, although most DBMSs provide interactive administration utilities that use the GRANT and REVOKE statements internally.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;span id="summary-1"&gt;&lt;/span&gt;&lt;h3&gt;Summary&lt;/h3&gt;
&lt;p&gt;In this lesson, you learned how to use some advanced SQL features. Constraints are an important part of enforcing referential integrity; indexes can improve data retrieval performance; triggers can be used to perform pre- or post-execution processing; and security options can be used to manage data access. Your own DBMS probably offers some form of these features. Refer to your DBMS documentation for more details.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="appendix-c-sql-statement-syntax"&gt;
&lt;h2&gt;Appendix C. SQL Statement Syntax&lt;/h2&gt;
&lt;p&gt;To help you find the syntax you need when you need it, this appendix lists the syntax for the most frequently used SQL operations. Each statement starts with a brief description and then displays the appropriate syntax. For added convenience, you'll also find cross references to the lessons where specific statements are taught.&lt;/p&gt;
&lt;p&gt;When reading statement syntax, remember the following:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;p&gt;The &lt;code class="docutils literal"&gt;|&lt;/code&gt; symbol is used to indicate one of several options, so &lt;code class="docutils literal"&gt;NULL|NOT NULL&lt;/code&gt; means specify either &lt;code class="docutils literal"&gt;NULL&lt;/code&gt; or &lt;code class="docutils literal"&gt;NOT NULL&lt;/code&gt;.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Keywords or clauses contained within square parentheses &lt;code class="docutils literal"&gt;[like this]&lt;/code&gt; are optional.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The syntax listed below will work with almost all DBMSs. You are advised to consult your own DBMS documentation for details of implementing specific syntactical changes.&lt;/p&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="alter-table"&gt;
&lt;h3&gt;ALTER TABLE&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;ALTER TABLE&lt;/code&gt; is used to update the schema of an existing table. To create a new table, use &lt;code class="docutils literal"&gt;CREATE TABLE&lt;/code&gt;. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0024.html#ch17"&gt;Lesson 17&lt;/a&gt;, “&lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0024.html#ch17"&gt;Creating and Manipulating Tables&lt;/a&gt;,” for more information.&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;ALTER TABLE tablename (   ADD|DROP  column  datatype  [NULL|NOT NULL]  [CONSTRAINTS],   ADD|DROP  column  datatype  [NULL|NOT NULL]  [CONSTRAINTS],     … );&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="commit"&gt;
&lt;h3&gt;COMMIT&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;COMMIT&lt;/code&gt; is used to write a transaction to the database. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0027.html#ch20"&gt;Lesson 20&lt;/a&gt;, “[[&lt;a class="reference external" href="file:part0027.html#ch20%5D%5BManaging"&gt;file:part0027.html#ch20][Managing&lt;/a&gt; Transaction Processin],” for more information.&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;COMMIT [TRANSACTION];&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="create-index"&gt;
&lt;h3&gt;CREATE INDEX&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;CREATE INDEX&lt;/code&gt; is used to create an index on one or more columns. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0029.html#ch22"&gt;Lesson 22&lt;/a&gt;, “&lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0029.html#ch22"&gt;Understanding Advanced SQL Features&lt;/a&gt;,” for more information.&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;CREATE INDEX indexname ON tablename (column, …);&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="create-procedure"&gt;
&lt;h3&gt;CREATE PROCEDURE&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;CREATE PROCEDURE&lt;/code&gt; is used to create a stored procedure. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0026.html#ch19"&gt;Lesson 19&lt;/a&gt;, “&lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0026.html#ch19"&gt;Working with Stored Procedures&lt;/a&gt;,” for more information. Oracle uses a different syntax as described in that lesson.&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;[[&lt;a class="reference external" href="file:part0057_split_001.html#p249pro01%5D%5BClick"&gt;file:part0057_split_001.html#p249pro01][Click&lt;/a&gt; here to view code imag]&lt;/p&gt;
&lt;p&gt;CREATE PROCEDURE procedurename [parameters] [options] AS SQL statement;&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="create-table"&gt;
&lt;h3&gt;CREATE TABLE&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;CREATE TABLE&lt;/code&gt; is used to create new database tables. To update the schema of an existing table, use &lt;code class="docutils literal"&gt;ALTER TABLE&lt;/code&gt;. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0024.html#ch17"&gt;Lesson 17&lt;/a&gt; for more information.&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;CREATE TABLE tablename (     column    datatype    [NULL|NOT NULL]    [CONSTRAINTS],     column    datatype    [NULL|NOT NULL]    [CONSTRAINTS],        … );&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="create-view"&gt;
&lt;h3&gt;CREATE VIEW&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;CREATE VIEW&lt;/code&gt; is used to create a new view of one or more tables. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0025.html#ch18"&gt;Lesson 18&lt;/a&gt;, “&lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0025.html#ch18"&gt;Using Views&lt;/a&gt;,” for more information.&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;CREATE VIEW viewname AS SELECT columns, … FROM tables, … [WHERE .. [GROUP BY .. [HAVING ..;&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="delete"&gt;
&lt;h3&gt;DELETE&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;DELETE&lt;/code&gt; deletes one or more rows from a table. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0023.html#ch16"&gt;Lesson 16&lt;/a&gt;,&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;DELETE FROM tablename [WHERE ..;&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="drop"&gt;
&lt;h3&gt;DROP&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;DROP&lt;/code&gt; permanently removes database objects (tables, views, indexes, and so forth). See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0024.html#ch17"&gt;Lessons 17&lt;/a&gt; and &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0025.html#ch18"&gt;18&lt;/a&gt; for more information.&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;DROP INDEX|PROCEDURE|TABLE|VIEW indexname|procedurename|tablename|viewname;&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="insert"&gt;
&lt;h3&gt;INSERT&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;INSERT&lt;/code&gt; adds a single row to a table. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0022.html#ch15"&gt;Lesson 15&lt;/a&gt;,&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;INSERT INTO tablename [(columns, …)] VALUES(values, …);&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="insert-select"&gt;
&lt;h3&gt;INSERT SELECT&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;INSERT SELECT&lt;/code&gt; inserts the results of a &lt;code class="docutils literal"&gt;SELECT&lt;/code&gt; into a table. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0022.html#ch15"&gt;Lesson 15&lt;/a&gt; for more information.&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;INSERT INTO tablename [(columns, …)] SELECT columns, … FROM tablename, … [WHERE ..;&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="rollback"&gt;
&lt;h3&gt;ROLLBACK&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;ROLLBACK&lt;/code&gt; is used to undo a transaction block. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0027.html#ch20"&gt;Lesson 20&lt;/a&gt; for more information.&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;ROLLBACK [ TO savepointnam;&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;or&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;ROLLBACK TRANSACTION;&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="select"&gt;
&lt;h3&gt;SELECT&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;SELECT&lt;/code&gt; is used to retrieve data from one or more tables (or views).&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;SELECT columnname, … FROM tablename, … [WHERE .. [UNION .. [GROUP BY .. [HAVING .. [ORDER BY ..;&lt;/p&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="update"&gt;
&lt;h3&gt;UPDATE&lt;/h3&gt;
&lt;p&gt;&lt;code class="docutils literal"&gt;UPDATE&lt;/code&gt; updates one or more rows in a table. See &lt;a class="reference external" href="https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/part0023.html#ch16"&gt;Lesson 16&lt;/a&gt; for more information.&lt;/p&gt;
&lt;p&gt;Input&lt;/p&gt;
&lt;hr class="docutils"&gt;
&lt;p&gt;UPDATE tablename SET columname = value, … [WHERE ..;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;hr class="docutils"&gt;
&lt;div class="section" id="publish"&gt;
&lt;h2&gt;Publish&lt;/h2&gt;
&lt;/div&gt;&lt;/div&gt;</description><category>sql</category><category>评注笔记</category><guid>https://alinbxsorcerer.github.io/posts/sql-in-10-minutes/</guid><pubDate>Thu, 09 Nov 2017 12:53:29 GMT</pubDate></item></channel></rss>